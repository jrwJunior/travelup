{"version":3,"sources":["actions/action_types.js","store/enhancement/themeMiddleware.js","store/enhancement/authMiddleware.js","reducers/authReducer.js","reducers/userReducer.js","reducers/mapleafletReducer.js","reducers/cropperReducer.js","reducers/modalReducer.js","reducers/popperReducer.js","reducers/galleryReducer.js","reducers/noticeReducer.js","reducers/themeReducer.js","reducers/rootReducer.js","fb/firebase.js","store/store.js","actions/modal_actions.js","actions/cropper_actions.js","actions/auth_actions.js","components/popper/popper_view.jsx","components/popper/popper_container.jsx","components/popper/index.js","actions/theme_actions.js","actions/popper_actions.js","components/cropper/cropper.jsx","components/cropper/index.js","actions/user_actions.js","components/upload_avatar/upload_avatar.jsx","utils/index.js","components/upload_avatar/upload_avatar_container.jsx","components/upload_avatar/index.js","actions/map_actions.js","services/service_geocoder.js","components/spinner/index.js","components/spinner/spinner_view.jsx","components/upload_file/upload_file.jsx","components/upload_file/upload_file_container.jsx","components/upload_file/index.js","components/logo/index.js","components/logo/logo.jsx","components/header/index.js","components/header/header.jsx","services/service_geo_cordinats.js","components/map_leaflet/map.jsx","components/map_leaflet/index.js","components/sidebar/sidebar_item.jsx","components/sidebar/sidebar.jsx","components/sidebar/sidebar_container.jsx","components/sidebar/index.js","actions/gallery_actions.js","components/gallery/gallery_item.jsx","components/gallery/gallery.jsx","components/gallery/gallery_container.jsx","components/gallery/index.js","components/notification/index.js","components/notification/notification.jsx","components/home/home.jsx","components/home/home_container.jsx","components/home/index.js","actions/notice_actions.js","components/auth/private_route.jsx","components/auth/input/index.js","components/auth/input/input.jsx","components/auth/auth_container/auth.jsx","components/auth/auth_container/index.js","components/auth/auth_socials/auth_soc.jsx","components/auth/auth_socials/auth_soc_container.jsx","components/auth/auth_socials/index.js","components/auth/button/index.js","components/auth/button/button.jsx","components/auth/sign_in/index.js","components/auth/sign_in/signin.jsx","components/auth/sign_up/index.js","components/auth/sign_up/signup.jsx","components/unlogged_topbar/index.js","components/unlogged_topbar/topbar.jsx","components/modal/modal_info.jsx","components/modal/index.js","components/app/app.jsx","components/app/index.js","index.js"],"names":["SET_NOTICE","middlewareTheme","getState","next","action","state","local","localStorage","type","setItem","JSON","stringify","theme","payload","data","parse","getItem","uid","auth","middlewareAuth","isLogined","initState","loading","logout","error","authReducer","console","log","user","userAvatar","userReducer","lat","lng","marks","selectMapId","errorCords","mapLeafletReducer","concat","zoom","photo","cropperReducer","isOpen","id","body","modalReducer","popperShow","popperReducer","photos","galleryReducer","isNotice","message","notificationReducer","actionTypes","notifi","colorTheme","themeReducer","rootReducer","combineReducers","fb","firebaseReducer","form","formReducer","cropper","map","modal","popper","gallery","notice","noticeReducer","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","settings","cacheSizeBytes","CACHE_SIZE_UNLIMITED","enablePersistence","configureStore","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunkMiddleware","withExtraArgument","getFirebase","getFirestore","authMiddleware","themeMiddleware","reactReduxFirebase","fbConfig","reduxFirestore","modalOppened","dispatch","setCropZoomPhoto","signInSocials","provider","a","db","signInWithPopup","res","email","photoURL","collection","doc","set","avatar","AppPopperView","props","onClickCheck","onChangeFile","onCancel","isChecked","onLogout","nodeRef","userData","isLogout","className","ref","onClick","src","alt","focusable","height","width","viewBox","aria-hidden","d","role","to","PopperContainer","React","createRef","handlerChecked","evt","preventDefault","setState","handleOutsideClick","current","contains","target","togglePopper","handleSignOut","signOut","then","addEventListener","this","unsubscribe","removeEventListener","prevProps","prevState","Component","Pooper","connect","setTheme","EditorPhoto","handleZoomSlider","value","cropZoomPhoto","handleResetZommSlider","handleSave","editor","getImageScaledToCanvas","toBlob","blob","updateUserAvatar","handleCancel","toggleModal","setEditorRef","updatePhoto","image","border","borderRadius","color","scale","rotate","axis","x","xmin","xmax","xstep","onChange","Cropper","url","file","localData","storage","put","snapshot","getDownloadURL","update","EditorView","isPopperShow","isEmpty","fileRef","popperRef","onClickPopper","onCloseModal","accept","multiple","CSSTransition","in","timeout","classNames","unmountOnExit","onRequestClose","overlayClassName","ExifOrentation","canvas","document","createElement","ctx","getContext","callback","EXIF","getData","orentation","exifdata","Orientation","render","img","Image","transform","drawImage","toDataURL","UploadAvatarContainer","fileInput","handleChange","cropPhoto","showModal","files","length","getFile","URL","createObjectURL","handleChangeFile","click","handlePopper","stopPropagation","handleCloseModal","undefined","UploadAvatar","setCropPhoto","setMapId","SeviceGeocoder","lon","api_url","encodeURIComponent","toString","fetch","ok","json","key","results","components","Spinner","mode","style","preserveAspectRatio","cx","cy","r","animationName","strokeDasharray","strokeWidth","UploadFileView","isLoading","xmlns","UploadFileContainer","serviceGeoocoder","ServiceGeoocoder","Array","from","forEach","handleClick","handleModalClose","coordinates","Promise","req","numerator","denominator","setPhotoCoordinates","setError","all","getGPSCoordinates","getTag","cords","modal_id","UploadFile","docRef","get","refData","Orentation","name","putString","fullPath","getMetadata","timeCreated","hasOwnProperty","sort","b","Date","exists","setGPSCoordinatesOfPhotos","Logo","Header","ServiceGeoCordinats","Mapleaflet","serviceGeoCoordinates","ServiceGeoCoordinates","map_dark","map_light","handleMouseOver","layer","isColor","isOpacity","setStyle","weight","fillColor","fillOpacity","handleMouseOut","resetStyle","mapCustomMarkIcon","items","images","divIcon","html","iconAnchor","iconSize","filterCountryId","options","selectCountry","item","includes","position","selectedCountry","feature","some","originalEvent","getAllPhotos","_id","getCords","setCenterMap","latlng","fill","Map","center","maxBounds","TileLayer","minZoom","maxZoom","GeoJSON","MapGeo","mapLayerStyled","onMouseOver","onMouseOut","Marker","icon","AppMap","storageRef","child","listRef","listAll","list","prefixes","parent","every","el","push","Object","keys","newCords","setPositionCenterMap","SidebarItem","countName","countCode","countId","onSelectCountry","onCountVisited","falagIcon","backgroundImage","Sidebar","isCountry","onFindCountry","placeholder","renderThumbVertical","features","properties","code","toLowerCase","indexOf","SidebarContainer","isFoundCountry","handleFindCountry","label","trim","handleSelectCountry","—ÅountVisited","itemLast","GalleryItem","isSelected","isSelectedItem","onSelectedItem","onOpenLightBox","selected","GalleryView","onDragEnter","onDragOver","onDragLeave","onDrop","onClose","onSelected","onRemoveItem","onOpenLightbox","islightboxOpen","isSelectedIndex","isImages","inputRef","disabled","currentIndex","views","GalleryContainer","serviceGeoCordinats","ServicesGeoCordinats","lightboxIsOpen","selectedIndex","selectedItem","setPhotosGallery","fileList","handleSelected","isSelect","handleSelectItem","val","index","findIndex","newArray","splice","handleRemoveItem","deleteDataItem","deleteMapCords","handleOpenLightbox","classList","add","rect","getBoundingClientRect","dx","clientX","left","dy","clientY","top","remove","closeModal","handleDragOverEnter","handleDragLeave","handleDragDrop","Gallery","isCoincidence","dataCords","setGalleryPhoto","delitem","delItem","newData","delete","deletedData","newMarks","filter","FieldValue","deleteGPSCoordinates","Notification","Home","customCrossIcon","HomeContainer","handleClosedModal","pushNotice","getNotice","setTimeout","getUser","dataset","removeAttribute","reader","FileReader","readAsDataURL","onloadend","result","PrivateRoute","component","rest","isUser","routeProps","exact","Input","input","meta","visiblePass","infoPass","showHidePassword","onShowPassword","touched","invalid","showPass","autoComplete","data-tooltip","display","active","authContainer","password","confirm","handleSubmit","values","location","pathname","signIn","signUp","history","handleValidate","field","handleValidUserEmail","handleValidUserPassword","handleValidConfirmPass","test","String","confirmPassword","handleToggleShowPassword","renderComponent","showHide","renderProp","onSubmit","onValidate","onToggleShowPassword","ReactComponent","AuthContainer","creds","signInWithEmailAndPassword","firestore","createUserWithEmailAndPassword","withRouter","AuthSocials","onSignInGoogle","onSignInFb","AuthSocialsContainer","providerGoogle","GoogleAuthProvider","providerFacebook","FacebookAuthProvider","signInGoogle","signInFacebook","Button","find","SignIn","reduxForm","valid","Field","validate","SignUp","Topbar","ReactModal","setAppElement","ModalInfo","marginTop","Modal","App","isOnline","showInstallMessage","handleOnliseStatus","status","handleModalError","handlePlatformIos","handleInStandaloneMode","navigator","userAgent","match","handleInstall","iosPlatform","platform","pop","standalone","deferredPrompt","butInstall","getElementById","promptEvent","prompt","userChoice","outcome","path","SingIn","SingUp","store","basename","process"],"mappings":"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","file":"static/js/main.48edab6e.chunk.js","sourcesContent":["const LOGIN_REQUSTED = 'LOGIN_REQUSTED';\r\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nconst LOGIN_ERROR = 'LOGIN_ERROR';\r\nconst LOGIN_OUT = 'LOGIN_OUT';\r\n\r\nconst USER_REQESTED = 'USER_REQESTED';\r\nconst USER_REQUEST_DATA = 'USER_REQUEST_DATA';\r\n\r\nconst CROPPER_ADD_PHOTO = 'CROPPER_ADD_PHOTO';\r\nconst CROPPER_ZOOM_PHOTO = 'CROPPER_ZOOM_PHOTO';\r\n\r\nconst MODAL_WINDOW = 'MODAL_WINDOW';\r\nconst POPPER_SHOW = 'POPPER_IS_SHOW';\r\n\r\nconst COORDINATES_REQUESTED = 'COORDINATES_REQUESTED';\r\nconst SET_MAP_COORDINATES = 'SET_MAP_COORDINATES';\r\nconst SET_POSITION_CENTER_MAP = 'SET_POSITION_CENTER_MAP';\r\nconst SET_ERROR_MAP_COORDINATES = 'SET_ERROR_MAP_COORDINATES';\r\nconst SET_MAP_ID = 'SET_MAP_ID';\r\nconst DELETE_MAP_COORDINATES = 'DELETE_MAP_COORDINATES';\r\n\r\nconst GALLERY_FETCH_REQUESTED = 'GALLERY_FETCH_REQUESTED';\r\nconst SET_PHOTO_GALLERY = 'SET_PHOTO_GALLERY';\r\nconst REMOVE_ITEM_GALLERY = 'REMOVE_ITEM_GALLERY';\r\n\r\nconst SET_NOTICE = 'SET_NOTIFICATION';\r\n\r\nconst SET_NEW_THEME = 'SET_THEME';\r\nconst GET_THEME = 'GET_THEME';\r\n\r\nexport {\r\n  LOGIN_REQUSTED,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_ERROR,\r\n  LOGIN_OUT,\r\n  USER_REQESTED,\r\n  USER_REQUEST_DATA,\r\n  CROPPER_ADD_PHOTO,\r\n  CROPPER_ZOOM_PHOTO,\r\n  MODAL_WINDOW,\r\n  POPPER_SHOW,\r\n  COORDINATES_REQUESTED,\r\n  SET_MAP_COORDINATES,\r\n  SET_POSITION_CENTER_MAP,\r\n  SET_ERROR_MAP_COORDINATES,\r\n  DELETE_MAP_COORDINATES,\r\n  SET_MAP_ID,\r\n  GALLERY_FETCH_REQUESTED,\r\n  SET_PHOTO_GALLERY,\r\n  REMOVE_ITEM_GALLERY,\r\n  SET_NOTICE,\r\n  SET_NEW_THEME,\r\n  GET_THEME\r\n}","import * as actionTypes from '../../actions/action_types';\r\n\r\nconst middlewareTheme = ({ getState }) => next => action => {\r\n  const state = getState();\r\n  const local = localStorage;\r\n\r\n  switch(action.type) {\r\n    case actionTypes.SET_NEW_THEME:\r\n      local.setItem('theme', JSON.stringify({ theme: action.payload }));\r\n      return next(action);\r\n    case actionTypes.GET_THEME:\r\n      const data = JSON.parse(local.getItem('theme'));\r\n\r\n      if (data) {\r\n        const { theme } = data;\r\n        next({ type: actionTypes.SET_NEW_THEME, payload: theme });\r\n      }\r\n      break;\r\n    case actionTypes.LOGIN_SUCCESS:\r\n      const user = JSON.parse(local.getItem('_user'));\r\n\r\n      if (user.uid !== state.auth.uid) {\r\n        local.setItem('theme', JSON.stringify({ theme: 'light' }));\r\n        next(action);\r\n      }\r\n      break;\r\n    default:\r\n      return next(action);\r\n  }\r\n}\r\n\r\nexport default middlewareTheme;","import * as actionTypes from '../../actions/action_types';\r\n\r\nconst middlewareAuth = () => next => action => {\r\n  const local = localStorage;\r\n\r\n  switch(action.type) {\r\n    case actionTypes.LOGIN_SUCCESS:\r\n      local.setItem('_user', JSON.stringify({ isLogined: true, uid: action.payload }));\r\n\r\n      return next(action);\r\n    case actionTypes.LOGIN_OUT:\r\n      local.setItem('_user', JSON.stringify({ isLogined : false }));\r\n\r\n      return next(action);\r\n    default:\r\n      return next(action);\r\n  }\r\n}\r\n\r\nexport default middlewareAuth;","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  uid: null,\r\n  isLogined: false,\r\n  loading: false,\r\n  logout: false,\r\n  error: null\r\n};\r\n\r\nconst authReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.LOGIN_REQUSTED:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        logout: false\r\n      }\r\n    case actionTypes.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        uid: action.payload,\r\n        isLogined: true,\r\n        loading: false\r\n      }\r\n    case actionTypes.LOGIN_ERROR:\r\n      console.log('ERROR')\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.payload\r\n      }\r\n    case actionTypes.LOGIN_OUT:\r\n      return {\r\n        ...state,\r\n        isLogined: false,\r\n        logout: true\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default authReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  user: {\r\n    userAvatar: ''\r\n  },\r\n  loading: false\r\n};\r\n\r\nconst userReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.USER_REQESTED:\r\n      return {\r\n        ...state,\r\n        loading: true\r\n      }\r\n    case actionTypes.USER_REQUEST_DATA:\r\n      return {\r\n        user: {\r\n          userAvatar: action.payload\r\n        },\r\n        loading: false\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  lat: 51.505,\r\n  lng: 0,\r\n  marks: [],\r\n  selectMapId: null,\r\n  errorCords: false, \r\n  loading: false\r\n};\r\n\r\nconst mapLeafletReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.COORDINATES_REQUESTED:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        errorCords: false\r\n      }\r\n    case actionTypes.SET_ERROR_MAP_COORDINATES:\r\n      return {\r\n        ...state,\r\n        errorCords: true\r\n      }\r\n    case actionTypes.SET_MAP_COORDINATES:\r\n      return {\r\n        ...state,\r\n        marks: state.marks.concat(action.payload),\r\n        loading: false\r\n      }\r\n    case actionTypes.SET_POSITION_CENTER_MAP:\r\n      const { lat, lng } = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        lat,\r\n        lng,\r\n      }\r\n    case actionTypes.SET_MAP_ID:\r\n      return {\r\n        ...state,\r\n        selectMapId: action.payload\r\n      }\r\n    case actionTypes.DELETE_MAP_COORDINATES:\r\n      return {\r\n        ...state,\r\n        marks: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default mapLeafletReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  zoom: 1,\r\n  photo: null\r\n};\r\n\r\nconst cropperReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.CROPPER_ADD_PHOTO:\r\n      return {\r\n        ...state,\r\n        photo: action.payload\r\n      }\r\n    case actionTypes.CROPPER_ZOOM_PHOTO:\r\n      return {\r\n        ...state,\r\n        zoom: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default cropperReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  isOpen: false,\r\n  id: null,\r\n  body: null\r\n};\r\n\r\nconst modalReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.MODAL_WINDOW:\r\n      const { id, body } = action.payload;\r\n      \r\n      return {\r\n        isOpen: !state.isOpen,\r\n        id,\r\n        body\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default modalReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  popperShow: false\r\n};\r\n\r\nconst popperReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.POPPER_SHOW:\r\n      return {\r\n        popperShow: !state.popperShow\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default popperReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  photos: {},\r\n  loading: false\r\n};\r\n\r\nconst galleryReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.GALLERY_FETCH_REQUESTED:\r\n      return {\r\n        ...state,\r\n        loading: true\r\n      }\r\n    case actionTypes.SET_PHOTO_GALLERY:\r\n      return {\r\n        photos: {\r\n          ...state.photos,\r\n          ...action.payload\r\n        },\r\n        loading: false\r\n      }\r\n    case actionTypes.REMOVE_ITEM_GALLERY:\r\n      return {\r\n        photos: action.payload,\r\n        loading: false\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default galleryReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  isNotice: false,\r\n  message: null\r\n};\r\n\r\nconst notificationReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.SET_NOTICE:\r\n      return {\r\n        isNotice: action.payload.notifi,\r\n        message: action.payload.message\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default notificationReducer;\r\n","import * as actionTypes from '../actions/action_types';\r\n\r\nconst initState  = {\r\n  colorTheme: 'light'\r\n};\r\n\r\nconst themeReducer = (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.SET_NEW_THEME:\r\n      return {\r\n        colorTheme: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default themeReducer;","import { combineReducers } from 'redux';\r\nimport { firebaseReducer } from 'react-redux-firebase';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport authReducer from './authReducer';\r\nimport userReducer from './userReducer';\r\nimport mapLeafletReducer from './mapleafletReducer';\r\nimport cropperReducer from './cropperReducer';\r\nimport modalReducer from './modalReducer';\r\nimport popperReducer from './popperReducer';\r\nimport galleryReducer from './galleryReducer';\r\nimport noticeReducer from './noticeReducer';\r\nimport themeReducer from './themeReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  fb: firebaseReducer,\r\n  form: formReducer,\r\n  auth: authReducer,\r\n  user: userReducer,\r\n  cropper: cropperReducer,\r\n  map: mapLeafletReducer,\r\n  modal: modalReducer,\r\n  popper: popperReducer,\r\n  gallery: galleryReducer,\r\n  notice: noticeReducer,\r\n  theme: themeReducer\r\n});\r\n\r\nexport default rootReducer;","import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport 'firebase/storage';\r\n\r\nconst config = {\r\n\tapiKey: \"AIzaSyCL9jSqc6dVYH2PKMveC9yyymUkehSHBT4\",\r\n\tauthDomain: \"travel-app-8a5ba.firebaseapp.com\",\r\n\tdatabaseURL: \"https://travel-app-8a5ba.firebaseio.com\",\r\n\tprojectId: \"travel-app-8a5ba\",\r\n\tstorageBucket: \"travel-app-8a5ba.appspot.com\",\r\n\tmessagingSenderId: \"631642393110\",\r\n\tappId: \"1:631642393110:web:d1b2de3b7dad149ec6c337\",\r\n\tmeasurementId: \"G-CGRQ77C7TJ\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\nfirebase.firestore().settings({\r\n  cacheSizeBytes: firebase.firestore.CACHE_SIZE_UNLIMITED\r\n});\r\nfirebase.firestore().enablePersistence();\r\n// firebase.analytics();\r\n\r\nexport default firebase;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport { reduxFirestore, getFirestore } from 'redux-firestore';\r\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport themeMiddleware from './enhancement/themeMiddleware';\r\nimport authMiddleware from './enhancement/authMiddleware';\r\nimport rootReducer from '../reducers/rootReducer';\r\nimport fbConfig from '../fb/firebase';\r\n\r\nconst configureStore = () => {\r\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n  const store = createStore(rootReducer, composeEnhancers(\r\n    applyMiddleware(\r\n      thunkMiddleware.withExtraArgument({ getFirebase, getFirestore }),\r\n      authMiddleware,\r\n      themeMiddleware\r\n      ),\r\n      reactReduxFirebase(fbConfig),\r\n      reduxFirestore(fbConfig)\r\n  ));\r\n\r\n  return store;\r\n}\r\n\r\nexport default configureStore;\r\n","import * as actionTypes from './action_types';\r\n\r\nconst modalOppened = (id, body) => dispatch => {\r\n  dispatch({ type: actionTypes.MODAL_WINDOW, payload:{\r\n    id,\r\n    body\r\n  }});\r\n}\r\n\r\nexport {\r\n  modalOppened\r\n}","import * as actionTypes from './action_types';\r\n\r\nconst setCropPhoto = url => dispatch => {\r\n  dispatch({ type: actionTypes.CROPPER_ADD_PHOTO, payload: url });\r\n}\r\n\r\nconst setCropZoomPhoto = zoom => dispatch => {\r\n  dispatch({ type: actionTypes.CROPPER_ZOOM_PHOTO, payload: zoom });\r\n}\r\n\r\nexport {\r\n  setCropPhoto,\r\n  setCropZoomPhoto\r\n}","import * as actionTypes from './action_types';\r\n\r\nconst signIn = ({ email, password }) => async(dispatch, getState, { getFirebase }) => {\r\n  const firebase = getFirebase();\r\n  dispatch({ type: actionTypes.LOGIN_REQUSTED });\r\n\r\n  try {\r\n    const res = await firebase.auth().signInWithEmailAndPassword(email, password);\r\n    dispatch({ type: actionTypes.LOGIN_SUCCESS, payload: res.user.uid });\r\n  } catch (e) {\r\n    dispatch({ type: actionTypes.LOGIN_ERROR, payload: e.message });\r\n  }\r\n}\r\n\r\nconst signUp = ({ email, password }) => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const firestore = getFirestore();\r\n  dispatch({ type: actionTypes.LOGIN_REQUSTED });\r\n\r\n  try {\r\n    const res = await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n    await firestore.collection('auth_users').doc(res.user.uid).set({\r\n      email,\r\n      password,\r\n      avatar: null,\r\n      uid: res.user.uid\r\n    });\r\n\r\n    dispatch({ type: actionTypes.LOGIN_SUCCESS, payload: res.user.uid });\r\n  } catch (e) {\r\n    dispatch({ type: actionTypes.LOGIN_ERROR, payload: {\r\n      signUp: e.message\r\n    }});\r\n  }\r\n}\r\n\r\nconst signOut = () => async(dispatch, getState, { getFirebase }) => {\r\n  const firebase = getFirebase();\r\n\r\n  await firebase.auth().signOut();\r\n  dispatch({ type: actionTypes.LOGIN_OUT });\r\n}\r\n\r\nconst signInSocials = provider => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n\r\n  try {\r\n    const res = await firebase.auth().signInWithPopup(provider);\r\n    const { email, photoURL, uid } = res.user;\r\n\r\n    db.collection('auth_users').doc(uid).set({\r\n      email,\r\n      uid,\r\n      avatar: photoURL\r\n    });\r\n\r\n    dispatch({ type: actionTypes.LOGIN_SUCCESS, payload: uid });\r\n  } catch(e) {\r\n    console.log(e.message);\r\n  }\r\n}\r\n\r\nexport {\r\n  signIn,\r\n  signOut,\r\n  signUp,\r\n  signInSocials\r\n};","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport './style.scss';\r\n\r\nconst AppPopperView = props => {\r\n  const { \r\n    onClickCheck,\r\n    onChangeFile,\r\n    onCancel,\r\n    isChecked,\r\n    onLogout,\r\n    nodeRef,\r\n    userData,\r\n    isLogout\r\n  } = props;\r\n\r\n  return (\r\n    <div className=\"popper\" ref={ nodeRef }>\r\n    <div className=\"popper-content popper-lg\">\r\n    {/* eslint-disable-next-line */}\r\n      <a\r\n        className='account-header animate-wobble'\r\n        onClick={ onChangeFile }\r\n      >\r\n        <div className='account-thumbnail'>\r\n          <figure className='thumbnail thumbnail-rounded'>\r\n            <div className='user-action-profile'>\r\n              <img src={ userData.userAvatar }  alt=\"\"/>\r\n            </div>\r\n          </figure>\r\n          <span className='picture-edit'/>\r\n        </div>\r\n        <div className='account-heading ellipsis'>\r\n          <span className='account-name'>Edit Photo</span>\r\n        </div>\r\n        <svg className=\"svg-icon svg-icon-chevron-right animate-wobble-target\" focusable=\"false\" height=\"12\" width=\"12\" viewBox=\"0 0 12 12\" aria-hidden=\"true\"><path d=\"M7.3 6l-4.5 4.4a.9.9 0 0 0 0 1.3.8.8 0 0 0 1.3 0l5.2-5.1a.9.9 0 0 0 0-1.2L4.1.3a.9.9 0 0 0-1.3 0 .9.9 0 0 0 0 1.3z\"></path></svg>\r\n      </a>\r\n      <ul\r\n        className='account-menu'\r\n        role='navigation'\r\n      >\r\n        <li className='account-item'>\r\n        {/* eslint-disable-next-line */}\r\n          <a\r\n            className='account-link is-main animate-wobble'\r\n            role='button'\r\n            onClick={ onLogout }\r\n          >\r\n            { isLogout ? <Redirect to='/login'/> : null }\r\n            Log out\r\n          </a>\r\n        </li>\r\n        <li className='account-item'>\r\n         <div className='account-input'>\r\n           <div className='account-input-label is-main'>Dark mode</div>\r\n           <label \r\n              className={ `input-switch ${ isChecked ? 'is-checked' : '' }` }\r\n              onClick={ onClickCheck }\r\n            >\r\n             <input type=\"checkbox\" className='input-control' />\r\n           </label>\r\n         </div>\r\n        </li>\r\n        <li className='account-item'>\r\n          {/* eslint-disable-next-line */}\r\n          <a \r\n            className='popper-cancel'\r\n            role='button'\r\n            onClick={ onCancel }\r\n          >\r\n            Cancel\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div className='popper-arrow'></div>\r\n  </div>\r\n  )\r\n}\r\n\r\nAppPopperView.propTypes = {\r\n  onClickCheck: PropTypes.func,\r\n  onLogout: PropTypes.func,\r\n  isChecked: PropTypes.bool,\r\n  userData: PropTypes.object\r\n}\r\n\r\nexport default AppPopperView;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signOut } from '../../actions/auth_actions';\r\nimport { setTheme } from '../../actions/theme_actions';\r\nimport { popperShow } from '../../actions/popper_actions';\r\nimport Popper from './popper_view';\r\n\r\nclass PopperContainer extends Component {\r\n  ref = React.createRef();\r\n\r\n  state = {\r\n    isChecked: false,\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('click', this.handleOutsideClick);\r\n\r\n    this.unsubscribe = () => {\r\n      window.removeEventListener('click', this.handleOutsideClick);  \r\n    }\r\n\r\n    if (this.props.colorTheme !== 'light') {\r\n      this.setState({ isChecked: true });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { isChecked } = this.state;\r\n\r\n    if (isChecked !== prevState.isChecked) {\r\n      this.props.theme(isChecked ? 'dark' : 'light');\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n  }\r\n\r\n  handlerChecked = evt => {\r\n    if (evt && evt.preventDefault) {\r\n      evt.preventDefault();\r\n    }\r\n\r\n    this.setState(state => {\r\n      return {\r\n        isChecked: !state.isChecked\r\n      }\r\n    });\r\n  }\r\n\r\n  handleOutsideClick = evt => {\r\n    if (this.ref.current && this.ref.current.contains(evt.target)) {\r\n      return;\r\n    }\r\n    \r\n    this.props.togglePopper();\r\n  }\r\n\r\n  handleSignOut = () => {\r\n    const { togglePopper } = this.props;\r\n    \r\n    this.props.signOut().then(togglePopper);\r\n  }\r\n\r\n  render() {\r\n    const { isChecked } = this.state;\r\n    const { onChangeFile, onCancel, logout } = this.props;\r\n\r\n    return (\r\n      <Popper\r\n        isChecked={ isChecked }\r\n        isLogout={ logout }\r\n        nodeRef={ this.ref }\r\n        userData={ this.props.user }\r\n        onClickCheck={ this.handlerChecked }\r\n        onLogout={ this.handleSignOut }\r\n        onChangeFile={ onChangeFile }\r\n        onCancel={ onCancel }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ user, theme, auth }) => {\r\n  return {\r\n    user: user.user,\r\n    logout: auth.logout,\r\n    colorTheme: theme.colorTheme\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    signOut: () => dispatch(signOut()),\r\n    theme: theme => dispatch(setTheme(theme)),\r\n    togglePopper: () => dispatch(popperShow())\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(PopperContainer);","import Pooper from './popper_container';\r\n\r\nexport default Pooper;","import * as actionTypes from './action_types';\r\n\r\nconst setTheme = theme => dispatch => {\r\n  dispatch({ type: actionTypes.SET_NEW_THEME, payload: theme });\r\n}\r\n\r\nconst getTheme = () => dispatch => {\r\n  dispatch({ type: actionTypes.GET_THEME });\r\n}\r\n\r\nexport {\r\n  setTheme,\r\n  getTheme\r\n}","import * as actionTypes from './action_types';\r\n\r\nconst popperShow = () => dispatch => {\r\n  dispatch({ type: actionTypes.POPPER_SHOW });\r\n}\r\n\r\nexport {\r\n  popperShow\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { updateUserData } from '../../actions/user_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport { setCropZoomPhoto } from '../../actions/cropper_actions';\r\nimport Cropper from 'react-avatar-editor';\r\nimport InputRange from 'react-input-slider';\r\n\r\nclass EditorPhoto extends Component {\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (this.props.updatePhoto !== prevProps.updatePhoto) {\r\n\t\t\tthis.props.toggleModal();\r\n\t\t}\r\n\t}\r\n\r\n\thandleZoomSlider = value => {\r\n    this.props.cropZoomPhoto(value);\r\n  };\r\n\r\n  handleResetZommSlider = () => {\r\n\t\tthis.props.cropZoomPhoto(1);\r\n\t};\r\n\r\n\thandleSave = () => {\r\n\t\tif (this.editor) {\r\n\t\t\tconst canvasScaled = this.editor.getImageScaledToCanvas();\r\n\r\n\t\t\tcanvasScaled.toBlob(blob => {\r\n\t\t\t\tthis.props.updateUserAvatar(blob);\r\n\t\t\t});\r\n\t\t}\r\n  };\r\n\t\r\n\thandleCancel = () => {\r\n\t\tthis.handleResetZommSlider();\r\n\t\tthis.props.toggleModal();\r\n\t};\r\n\t\r\n\tsetEditorRef = editor => this.editor = editor;\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"cropper\">\r\n\t\t\t\t<Cropper\r\n\t\t\t\t\tref={ this.setEditorRef }\r\n\t\t\t\t\timage={ this.props.cropper.photo }\r\n\t\t\t\t\twidth={ 250 }\r\n\t\t\t\t\theight={ 250 }\r\n\t\t\t\t\tborder={ 0 }\r\n\t\t\t\t\tborderRadius={ 250 * 2 }\r\n\t\t\t\t\tcolor={ [255, 255, 255, 0.6] }\r\n\t\t\t\t\tscale={ this.props.cropper.zoom }\r\n\t\t\t\t\trotate={ 0 }\r\n\t\t\t\t/>\r\n\t\t\t\t<span className=\"crop-title\">Select an area for your profile photo</span>\r\n\t\t\t\t<InputRange \r\n\t\t\t\t\taxis=\"x\"\r\n\t\t\t\t\tx={ this.props.cropper.zoom }\r\n\t\t\t\t\txmin={ 1 }\r\n\t\t\t\t\txmax={ 10 }\r\n\t\t\t\t\txstep={ 0.1 }\r\n\t\t\t\t\tonChange={ ({ x }) => this.handleZoomSlider(x) }\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"crop-controls\">\r\n          <button \r\n            className=\"crop-control\" \r\n            onClick={ this.handleCancel }\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button \r\n            className=\"crop-control\" \r\n\t\t\t\t\t\tonClick={ this.handleSave }\r\n          >\r\n            Save \r\n          </button>\r\n        </div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ({ cropper, user }) => {\r\n  return {\r\n\t\tcropper,\r\n\t\tupdatePhoto: user.user.userAvatar\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n\t\tupdateUserAvatar: url => dispatch(updateUserData(url)),\r\n\t\tcropZoomPhoto: zoom => dispatch(setCropZoomPhoto(zoom)),\r\n\t\ttoggleModal: () => dispatch(modalOppened()),\r\n  }\r\n}\r\n\r\nEditorPhoto.propTypes = {\r\n\teditorRef: PropTypes.func,\r\n\tonChangeZoom: PropTypes.func,\r\n\tphotoUrl: PropTypes.string,\r\n\trangeZoom: PropTypes.number,\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps)(EditorPhoto);","import Cropper from './cropper';\r\n\r\nexport default Cropper;","import * as actionTypes from './action_types';\r\n\r\nconst getUserData = () => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n\r\n  dispatch({ type: actionTypes.USER_REQESTED });\r\n  const docRef = db.collection('auth_users').doc(localData.uid);\r\n  const res = await docRef.get();\r\n\r\n  if (res.exists) {\r\n    const { avatar } = res.data();\r\n\r\n    if (!avatar) {\r\n      const url = await firebase.storage().ref('users/user_default_avatar/5.png').getDownloadURL();\r\n      const data = await fetch(url);\r\n\r\n      if (data.ok) {\r\n        const blob = await data.blob();\r\n        const reader = new FileReader();\r\n\r\n        reader.readAsDataURL(blob);\r\n        reader.onloadend = () => {\r\n          dispatch({ type: actionTypes.USER_REQUEST_DATA, payload: reader.result });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (avatar) {\r\n      dispatch({ type: actionTypes.USER_REQUEST_DATA, payload: avatar });\r\n    }\r\n  } else {\r\n    console.log(\"No such document!\");\r\n  }\r\n}\r\n\r\nconst updateUserData = file => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n\r\n  try {\r\n    const snapshot = await firebase.storage().ref(`users/${localData.uid}/user_avatar/avatar`).put(file);\r\n    const url = await snapshot.ref.getDownloadURL();\r\n\r\n    db.collection('auth_users').doc(localData.uid).update({\r\n      avatar: url\r\n    });\r\n\r\n    dispatch({ type: actionTypes.USER_REQUEST_DATA, payload: url });\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nexport {\r\n  getUserData,\r\n  updateUserData\r\n}","import React from 'react';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport Popper from '../popper';\r\nimport ReactModal from 'react-modal';\r\nimport Cropper from '../cropper';\r\nimport './style.scss';\r\n\r\nconst EditorView = props => {\r\n  const { \r\n    isPopperShow,\r\n    userData,\r\n    isOpen,\r\n    isEmpty,\r\n    fileRef,\r\n    popperRef,\r\n    onChange,\r\n    onChangeFile,\r\n    onClickPopper,\r\n    onCloseModal\r\n  } = props;\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <div className='sekeletonbox-avatar'/>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-action\">\r\n      <button \r\n        type='button' \r\n        className='upload-file user-action-profile'\r\n        onClick={ onClickPopper }\r\n      >\r\n        <img src={ userData.userAvatar } alt=\"user-avatar\"/>\r\n      </button>\r\n      <input \r\n        type=\"file\"\r\n        accept=\"image/jpeg,image/png\"\r\n        multiple={ false }\r\n        onChange={ onChange }\r\n        className=\"input-file\"\r\n        ref={ fileRef }\r\n      />\r\n      <CSSTransition\r\n        in={ isPopperShow }\r\n        timeout={ 350 }\r\n        classNames='dropdown'\r\n        unmountOnExit\r\n      >\r\n        <Popper \r\n          onChangeFile={ onChangeFile }\r\n          onCancel={ onClickPopper }\r\n          popperRef={ popperRef }\r\n          { ...props }\r\n        />\r\n      </CSSTransition>\r\n      <ReactModal\r\n        isOpen={ isOpen }\r\n        onRequestClose={ onCloseModal }\r\n        className=\"modal modal-cropper\"\r\n        overlayClassName=\"modal-mask\"\r\n      >\r\n        <Cropper/>\r\n      </ReactModal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditorView;","import EXIF from 'exif-js';\r\n\r\nexport default class ExifOrentation {\r\n\tconstructor(file) {\r\n\t\tthis.canvas = document.createElement('canvas');\r\n\t\tthis.ctx = this.canvas.getContext(\"2d\");\r\n\t\tthis.file = file;\r\n\t}\r\n\r\n\tgetFile(url, callback) {\r\n\t\tEXIF.getData(this.file, () => {\r\n\t\t\tconst orentation = this.file.exifdata.Orientation;\r\n\t\t\tthis.render(url, orentation, callback)\r\n\t\t});\r\n\t}\r\n\r\n\trender(url, orentation, callback) {\r\n\t\tconst img = new Image();\r\n\r\n\t\timg.addEventListener('load', () => {\r\n\t\t\tconst width = img.width;\r\n\t\t\tconst height = img.height;\r\n\t\r\n\t\t\tif (4 < orentation && orentation < 9) {\r\n\t\t\t\tthis.canvas.width = height;\r\n\t\t\t\tthis.canvas.height = width;\r\n\t\t\t} else {\r\n\t\t\t\tthis.canvas.width = width;\r\n\t\t\t\tthis.canvas.height = height;\r\n\t\t\t}\r\n\t\r\n\t\t\tswitch (orentation) {\r\n\t\t\t\tcase 2: this.ctx.transform(-1, 0, 0, 1, width, 0); break;\r\n\t\t\t\tcase 3: this.ctx.transform(-1, 0, 0, -1, width, height ); break;\r\n\t\t\t\tcase 4: this.ctx.transform(1, 0, 0, -1, 0, height ); break;\r\n\t\t\t\tcase 5: this.ctx.transform(0, 1, 1, 0, 0, 0); break;\r\n\t\t\t\tcase 6: this.ctx.transform(0, 1, -1, 0, height , 0); break;\r\n\t\t\t\tcase 7: this.ctx.transform(0, -1, -1, 0, height , width); break;\r\n\t\t\t\tcase 8: this.ctx.transform(0, -1, 1, 0, 0, width); break;\r\n\t\t\t\tdefault: break;\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.ctx.drawImage(img, 0, 0);\r\n\t\t\tcallback(this.canvas.toDataURL());\r\n\t\t})\r\n\t\timg.src = url;\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setCropPhoto, setCropZoomPhoto } from '../../actions/cropper_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport { popperShow } from '../../actions/popper_actions';\r\nimport UploadAvatar from './upload_avatar';\r\nimport ExifOrentation from '../../utils';\r\n\r\nclass UploadAvatarContainer extends Component {\r\n  fileInput = React.createRef();\r\n\r\n  handleChange = evt => {\r\n    const { cropPhoto, showModal, cropZoomPhoto } = this.props;\r\n    cropZoomPhoto(1);\r\n\r\n    if (evt.target.files.length) {\r\n      const file = evt.target.files[0];\r\n\r\n      new ExifOrentation(file).getFile(\r\n        window.URL.createObjectURL(file),\r\n        url => cropPhoto(url)\r\n      );\r\n      showModal('cropper', null);\r\n    }\r\n  };\r\n\r\n  handleChangeFile = () => {\r\n    this.fileInput.current.click();\r\n  };\r\n\r\n  handlePopper = evt => {\r\n    evt.stopPropagation();\r\n    \r\n    this.props.togglePopper();\r\n  }\r\n\r\n  handleCloseModal = () => {\r\n    this.props.showModal(undefined, null);\r\n  }\r\n\r\n  render() {\r\n    const { id, popperShow, isEmpty } = this.props;\r\n\r\n    return (\r\n      <UploadAvatar\r\n        userData={ this.props.user }\r\n        isPopperShow={ popperShow }\r\n        isOpen={ id === 'cropper' }\r\n        isEmpty={ isEmpty }\r\n        fileRef={ this.fileInput }\r\n        onChange={ this.handleChange }\r\n        onChangeFile={ this.handleChangeFile }\r\n        onClickPopper={ this.handlePopper }\r\n        onCloseModal={ this.handleCloseModal }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ user, modal, popper }) => {\r\n  return {\r\n    id: modal.id,\r\n    user: user.user,\r\n    isEmpty: user.loading,\r\n    popperShow: popper.popperShow\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    cropPhoto: url => dispatch(setCropPhoto(url)),\r\n    cropZoomPhoto: zoom => dispatch(setCropZoomPhoto(zoom)),\r\n    showModal: (id) => dispatch(modalOppened(id)),\r\n    togglePopper: () => dispatch(popperShow())\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(UploadAvatarContainer);","import UploadAvatar from './upload_avatar_container';\r\n\r\nexport default UploadAvatar;","import * as actionTypes from './action_types';\r\nimport Orentation from '../utils';\r\n\r\nconst setGPSCoordinatesOfPhotos = (file, cords) => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n\r\n  try {\r\n    const { id } = cords;\r\n    const data = {};\r\n    const docRef = await db.collection('map_location').doc(localData.uid);\r\n    const refData = await docRef.get();\r\n\r\n    new Orentation(file).getFile(window.URL.createObjectURL(file), async url => {\r\n      dispatch({ type: actionTypes.COORDINATES_REQUESTED });\r\n\r\n      const name = file.name;\r\n      const { ref } = await firebase.storage()\r\n      .ref(`users/${localData.uid}/gallery/${id}/${file.name}`)\r\n      .putString(url, 'data_url');\r\n\r\n      const src = await ref.getDownloadURL();\r\n      const { timeCreated } = await firebase.storage().ref(ref.fullPath).getMetadata();\r\n\r\n      if (!data.hasOwnProperty(id)) {\r\n        data[id] = [{ src, name, timeCreated }];\r\n      }\r\n\r\n      data[id].sort((a, b) => (\r\n        new Date(b.timeCreated) - new Date(a.timeCreated)\r\n      ))\r\n\r\n      dispatch({ type: actionTypes.SET_PHOTO_GALLERY, payload: data });\r\n      dispatch({ type: actionTypes.SET_MAP_COORDINATES, payload: cords });\r\n    });\r\n\r\n    if (refData.exists) {\r\n      db.collection('map_location').doc(localData.uid).update({\r\n        [id]: [{ ...cords }]\r\n      });\r\n    } else {\r\n      db.collection('map_location').doc(localData.uid).set({\r\n        [id]: [{ ...cords }]\r\n      });\r\n    }\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nconst getAllPhotosAndGPSCoordinates = () => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n\r\n  try {\r\n    const data = {};\r\n    const storageRef = await firebase.storage().ref(`users/${localData.uid}/`);\r\n    const listRef = await storageRef.child(`gallery/`);\r\n    const docRef = await db.collection('map_location').doc(localData.uid);\r\n    const cords = await docRef.get();\r\n\r\n    const list = await listRef.listAll();\r\n    list.prefixes.forEach(async({ fullPath: url }) => {\r\n      const res = await firebase.storage().ref(url).listAll();\r\n\r\n      res.items.forEach(async({ name, fullPath: url, parent }) => {\r\n        const src = await firebase.storage().ref(url).getDownloadURL();\r\n        const { timeCreated } = await firebase.storage().ref(url).getMetadata();\r\n        const id = parent.name;\r\n\r\n        if (!data.hasOwnProperty(id)) {\r\n          data[id] = [{ src, name, timeCreated }];\r\n        }\r\n\r\n        if (data[id].length) {\r\n          const noMatches = data[id].every(el => el.name.includes(name));\r\n          \r\n          if (!noMatches) {\r\n            data[id].push({ src, name, timeCreated });\r\n          }\r\n        }\r\n\r\n        data[id].sort((a, b) => (\r\n          new Date(b.timeCreated) - new Date(a.timeCreated)\r\n        ))\r\n\r\n        if (Object.keys(data).length === list.prefixes.length) {\r\n          const newCords = [];\r\n\r\n          for (let key in cords.data()) {\r\n            newCords.push(...cords.data()[key]);\r\n          }\r\n          \r\n          if (newCords.length !== getState().map.marks.length) {\r\n            dispatch({ type: actionTypes.SET_PHOTO_GALLERY, payload: data });\r\n            dispatch({ type: actionTypes.SET_MAP_COORDINATES, payload: newCords });\r\n          }\r\n        }\r\n      })\r\n    })\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nconst setPositionCenterMap = cords => dispatch => {\r\n  const lat = cords[0];\r\n  const lng = cords[1];\r\n\r\n  dispatch({ type: actionTypes.SET_POSITION_CENTER_MAP, payload: {\r\n    lat,\r\n    lng\r\n  }});\r\n}\r\n\r\nconst deleteGPSCoordinates = id => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n\r\n  const { marks } = getState().map;\r\n  const data = getState().gallery.photos;\r\n\r\n  if (!data.hasOwnProperty(id)) {\r\n    const newMarks = marks.filter(el => el.id !== id);\r\n\r\n    db.collection('map_location').doc(localData.uid).update({\r\n      [id]: db.FieldValue.delete()\r\n    });\r\n    console.log(newMarks)\r\n    dispatch({ type: actionTypes.DELETE_MAP_COORDINATES, payload: newMarks });\r\n  }\r\n}\r\n\r\nconst setMapId = id => dispatch => {\r\n  dispatch({ type: actionTypes.SET_MAP_ID, payload: id });\r\n}\r\n\r\nconst failGPSCoordinates = () => dispatch => {\r\n  dispatch({ type: actionTypes.SET_ERROR_MAP_COORDINATES });\r\n}\r\n\r\nexport {\r\n  setGPSCoordinatesOfPhotos,\r\n  getAllPhotosAndGPSCoordinates,\r\n  setPositionCenterMap,\r\n  setMapId,\r\n  deleteGPSCoordinates,\r\n  failGPSCoordinates\r\n}","class SeviceGeocoder {\r\n  async getData([ lat, lon ]) {\r\n    const api_key = '668d0ff8a40145fbb39d331c203442b6';\r\n    const api_url = `https://api.opencagedata.com/geocode/v1/json?key=${api_key}&q=${encodeURIComponent(`${lat.toString()},${lon.toString()}`)}&pretty=1&no_annotations=1&language=en`;\r\n    const data = {\r\n      lon,\r\n      lat\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(api_url);\r\n\r\n      if (res.ok) {\r\n        const { results } = await res.json();\r\n        const components = results[0].components;\r\n\r\n        for (let key in components) {\r\n          if (key === 'ISO_3166-1_alpha-3') {\r\n            data.id = components[key];\r\n          }\r\n        }\r\n      }\r\n    } catch(e) {\r\n      console.log(e);\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport default SeviceGeocoder;","import Spinner from './spinner_view';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './style.scss';\r\n\r\nconst Spinner = ({ mode = 'white', width, height }) => {\r\n  return(\r\n    <div \r\n      className={ `spinner ${ mode }` }\r\n      style={{ width, height }}\r\n    >\r\n      <svg\r\n        focusable=\"false\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n        viewBox=\"0 0 51.6 51.6\"\r\n        style={{\r\n          width: \"56px\",\r\n          height: \"56px\"\r\n        }}\r\n      >\r\n        <circle\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          r=\"23\"\r\n          className=\"ng-star-inserted\"\r\n          style={{\r\n            animationName: \"mat-progress-spinner-stroke-rotate-56\",\r\n            strokeDasharray: \"144.513px\",\r\n            strokeWidth: \"10%\"\r\n          }}\r\n        />\r\n      </svg>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Spinner from '../spinner';\r\nimport './style.scss';\r\n\r\nconst UploadFileView = props => {\r\n  const { \r\n    onChange,\r\n    onClick,\r\n    isLoading,\r\n    isEmpty,\r\n    fileInput\r\n  } = props;\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <div className='skeletonscreen-topbar'/>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        type='button'\r\n        className='upload-photos'\r\n        onClick={ onClick }\r\n      >\r\n        { isLoading ? <Spinner mode='dark' width='20px' height='20px' /> : null }\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className='svg-icon' viewBox=\"0 0 384.97 384.97\" width='15' height='15'>\r\n          <path d=\"M372.939 264.641c-6.641 0-12.03 5.39-12.03 12.03v84.212H24.061v-84.212c0-6.641-5.39-12.03-12.03-12.03S0 270.031 0 276.671v96.242c0 6.641 5.39 12.03 12.03 12.03h360.909c6.641 0 12.03-5.39 12.03-12.03v-96.242c.001-6.652-5.389-12.03-12.03-12.03z\"/>\r\n          <path d=\"M117.067 103.507l63.46-62.558v235.71c0 6.641 5.438 12.03 12.151 12.03s12.151-5.39 12.151-12.03V40.95l63.46 62.558c4.74 4.704 12.439 4.704 17.179 0 4.74-4.704 4.752-12.319 0-17.011L201.268 3.5c-4.692-4.656-12.584-4.608-17.191 0L99.888 86.496a11.942 11.942 0 000 17.011c4.74 4.704 12.439 4.704 17.179 0z\"/>\r\n        </svg>\r\n        <span className='upload-photos-label'>Upload file</span>\r\n        <input \r\n          type=\"file\" \r\n          multiple\r\n          className=\"input-file\"\r\n          onChange={ onChange }\r\n          ref={ fileInput }\r\n        />\r\n      </button>\r\n    </>\r\n  )\r\n}\r\n\r\nUploadFileView.propTypes = {\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  isLoading: PropTypes.bool\r\n}\r\n\r\nexport default UploadFileView;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { failGPSCoordinates } from '../../actions/map_actions';\r\nimport { setGPSCoordinatesOfPhotos } from '../../actions/map_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport EXIF from 'exif-js';\r\nimport ServiceGeoocoder from '../../services/service_geocoder';\r\nimport UploadFile from './upload_file';\r\n\r\nclass UploadFileContainer extends Component {\r\n  fileInput = React.createRef();\r\n  serviceGeoocoder = new ServiceGeoocoder();\r\n\r\n  handleChange = evt => {\r\n    const files = evt.target.files;\r\n\r\n\t\tArray.from(files).forEach(file => this.getFile(file));\r\n\t}\r\n\r\n  handleClick = () => {\r\n    this.fileInput.current.click();\r\n  };\r\n\r\n  handleModalClose = () => {\r\n    this.props.toggleModal();\r\n  }\r\n\r\n  getGPSCoordinates(coordinates) {\r\n    return new Promise((res, req) => {\r\n      if (coordinates) {\r\n        const resCords = coordinates[0].numerator + coordinates[1].numerator / (60 * coordinates[1].denominator) + coordinates[2].numerator / (3600 * coordinates[2].denominator);\r\n        res(resCords);\r\n      } else {\r\n        req();\r\n      }\r\n    });\r\n  }\r\n\r\n  getFile(file) {\r\n    const { setPhotoCoordinates, showModal, setError } = this.props;\r\n\r\n    EXIF.getData(file, () => {\r\n      Promise.all([\r\n        this.getGPSCoordinates(EXIF.getTag(file, 'GPSLatitude')),\r\n        this.getGPSCoordinates(EXIF.getTag(file, 'GPSLongitude'))\r\n      ])\r\n      .then(data => {\r\n        this.serviceGeoocoder.getData(data)\r\n        .then(cords => setPhotoCoordinates(file, cords))\r\n      }, \r\n      () => {\r\n        const message = 'We could not get the geolocation data from your photos, you can add photos manually by selecting a country, and add photos yourself.';\r\n\r\n        showModal('error-gps', message);\r\n        setError();\r\n      })\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { loading, isEmpty, errorCords, id } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <UploadFile\r\n          onChange={ this.handleChange }\r\n          onClick={ this.handleClick }\r\n          onCloseModal={ this.handleModalClose }\r\n          isLoading={ loading }\r\n          isEmpty={ isEmpty }\r\n          fileInput={ this.fileInput }\r\n          errorCords={ errorCords }\r\n          isOpen={ id === this.modal_id }\r\n        />\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ user, map, modal }) => {\r\n  return {\r\n    isEmpty: user.loading,\r\n    loading: map.loading,\r\n    errorCords: map.errorCords,\r\n    id: modal.id\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setPhotoCoordinates: (file, cords) => dispatch(setGPSCoordinatesOfPhotos(file, cords)),\r\n    setError: () => dispatch(failGPSCoordinates()),\r\n    showModal: (id, body) => dispatch(modalOppened(id, body))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(UploadFileContainer);","import UploadFile from './upload_file_container';\r\n\r\nexport default UploadFile;","import Logo from './logo';\r\n\r\nexport default Logo;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './style.scss';\r\n\r\nconst Logo = () => {\r\n  return (\r\n    <Link to=\"/\" className='app-logo'>\r\n      <span className='app-logo-pic'/>\r\n      <span className='app-logo-text'>\r\n        <span>Tra</span>velup\r\n      </span>\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default Logo;","import Header from './header';\r\n\r\nexport default Header;","import React from 'react';\r\nimport UploadAvatar from '../upload_avatar';\r\nimport UploadFile from '../upload_file';\r\nimport Logo from '../logo';\r\nimport './style.scss';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className='app-header'>\r\n      <div className=\"app-header-container\">\r\n        <div className=\"app-header-left\">\r\n          <Logo/>\r\n        </div>\r\n        <div className='app-header-right'>\r\n          <UploadFile/>\r\n          <UploadAvatar/>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","class ServiceGeoCordinats {\r\n  async getCords(id) {\r\n    const res = await fetch(`https://restcountries.eu/rest/v2/alpha/${id}/?fields=latlng`);\r\n\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n  }\r\n}\r\n\r\nexport default ServiceGeoCordinats;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Map, Marker, TileLayer, GeoJSON } from 'react-leaflet';\r\nimport { divIcon } from 'leaflet';\r\nimport MapGeo from './map.geo.json';\r\nimport { getAllPhotosAndGPSCoordinates, setMapId, setPositionCenterMap } from '../../actions/map_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport ServiceGeoCoordinates from '../../services/service_geo_cordinats';\r\nimport './style.scss';\r\n\r\nclass Mapleaflet extends Component {\r\n  serviceGeoCoordinates = new ServiceGeoCoordinates();\r\n  map_dark = 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png';\r\n  map_light = 'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png';\r\n\r\n  componentDidMount() {\r\n    this.props.getAllPhotos();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { marks } = this.props.map;\r\n\r\n    if (marks.length && marks.length !== prevProps.map.marks.length) {\r\n      const _id = marks[marks.length -1].id;\r\n\r\n      this.serviceGeoCoordinates.getCords(_id)\r\n        .then(cords => this.props.setCenterMap(cords.latlng));\r\n    }\r\n  }\r\n\r\n  handleMouseOver = evt => {\r\n    const ctx = evt.layer;\r\n    const isColor = this.props.colorTheme === 'dark' ? '#323232' : '#fffdf9';\r\n    const isOpacity = this.props.colorTheme === 'dark' ? 0.35 : 0.65;\r\n\r\n    ctx.setStyle({\r\n      weight: 0,\r\n      fillColor:  isColor,\r\n      fillOpacity: isOpacity,\r\n    })\r\n  }\r\n\r\n  handleMouseOut = evt => {\r\n    evt.target.resetStyle(evt.layer);\r\n  }\r\n\r\n  mapCustomMarkIcon = id => {\r\n    const { images } = this.props;\r\n    const items = images[id];\r\n\r\n    return divIcon({\r\n      html: `\r\n        <img src=${ items[0].src } alt='preview photo'>\r\n        <span class='marker-quantity'>${ items.length }</span>  \r\n        `,\r\n      className: 'iconButtonAddPhoto',\r\n      iconAnchor: [20, 40],\r\n      iconSize: [40, 40]\r\n    });\r\n  }\r\n\r\n  mapLayerStyled() {\r\n    return {\r\n      fill: true,\r\n      fillColor: 'transparent',\r\n      weight: 0,\r\n      width: 100\r\n    }\r\n  }\r\n\r\n  filterCountryId = evt => {\r\n    const { options } = evt.target;\r\n    const { map, showModal, selectCountry } = this.props;\r\n\r\n    map.marks.forEach(item => {\r\n      if (item.id.includes(options.position.id)) {\r\n        selectCountry(options.position.id);\r\n        showModal('gallery', null);\r\n      }\r\n    });\r\n  }\r\n\r\n  selectedCountry = evt => {\r\n    const { map, selectCountry, showModal } = this.props;\r\n    const { id } = evt.layer.feature;\r\n\r\n    if (!map.marks.some(item => item.id === id)) {\r\n      selectCountry(evt.layer.feature.id);\r\n      showModal('gallery', null);\r\n    } else {\r\n      evt.originalEvent.stopPropagation();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { map, colorTheme } = this.props;\r\n    const position = [this.props.map.lat, this.props.map.lng];\r\n\r\n    return (\r\n      <Map\r\n        className='app-map'\r\n        center={ position }\r\n        zoom={ 3 }\r\n        maxBounds={ [[90, -180], [-70, 180]] }\r\n      >\r\n        <TileLayer\r\n          url={ colorTheme === 'dark' ? this.map_dark : this.map_light }\r\n          minZoom={ 3 }\r\n          maxZoom={ 5 }\r\n        />\r\n        <GeoJSON \r\n          data={ MapGeo } \r\n          style={ this.mapLayerStyled }\r\n          onMouseOver={ this.handleMouseOver }\r\n          onMouseOut={ this.handleMouseOut }\r\n          onClick={ evt => this.selectedCountry(evt) }\r\n        />\r\n        { map.marks.map(cords => (\r\n          <Marker \r\n            key={ cords.id }\r\n            position={ cords }\r\n            icon={ this.mapCustomMarkIcon(cords.id) }\r\n            onClick={ evt => this.filterCountryId(evt)}\r\n          />\r\n        ))}\r\n      </Map>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ map, gallery, theme }) => {\r\n  return {\r\n    images: gallery.photos,\r\n    colorTheme: theme.colorTheme,\r\n    map\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getAllPhotos: () => dispatch(getAllPhotosAndGPSCoordinates()),\r\n    setCenterMap: cords => dispatch(setPositionCenterMap(cords)),\r\n    showModal: (id, body) => dispatch(modalOppened(id, body)),\r\n    selectCountry: id => dispatch(setMapId(id))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(Mapleaflet);","import AppMap from './map';\r\n\r\nexport default AppMap;","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\n\r\nconst SidebarItem = props => {\r\n  const { \r\n    countName,\r\n    countCode,\r\n    countId,\r\n    onSelectCountry,\r\n    onCountVisited\r\n  } = props;\r\n\r\n  const falagIcon = `https://www.countryflags.io/${countCode}/shiny/64.png`;\r\n\r\n  return (\r\n    <div \r\n      className='sidebar-item'\r\n      onClick={ () => onSelectCountry(countId) }\r\n    >\r\n      { onCountVisited(countId) }\r\n      <span className='sidebar-item-label'>{ countName }</span>\r\n      <span className='icon-flag' style={{ backgroundImage: `url(${falagIcon})` }}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nSidebarItem.propTypes = {\r\n  countName: PropTypes.string,\r\n  countCode: PropTypes.string,\r\n  countId: PropTypes.string,\r\n  onSelectCountry: PropTypes.func,\r\n  onCountVisited: PropTypes.func\r\n}\r\n\r\nexport default SidebarItem;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport { features } from '../map_leaflet/map.geo.json';\r\nimport Item from './sidebar_item';\r\nimport './style.scss';\r\n\r\nconst Sidebar = props => {\r\n  const { \r\n    isCountry,\r\n    onFindCountry,\r\n    onSelectCountry,\r\n    onCountVisited,\r\n    isEmpty\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className='app-sidebar-search'>\r\n        <input \r\n          type=\"text\" \r\n          className=\"input-search\" \r\n          placeholder=\"Search\"\r\n          onChange={ onFindCountry }\r\n        />\r\n        <span className=\"icon-magnifier\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className='svg-icon' viewBox=\"0 0 56.97 56.97\" width=\"16\" height=\"16\">\r\n          <path d=\"M55.15 51.89l-13.56-14.1A22.93 22.93 0 0 0 46.99 23c0-12.68-10.32-23-23-23s-23 10.32-23 23 10.31 23 23 23c4.76 0 9.3-1.44 13.17-4.16l13.66 14.2a2.98 2.98 0 0 0 4.24.09 3 3 0 0 0 .09-4.24zM23.98 6c9.38 0 17 7.63 17 17s-7.62 17-17 17-17-7.63-17-17 7.63-17 17-17z\" />\r\n        </svg>\r\n        </span>\r\n      </div>\r\n      <Scrollbars\r\n        renderThumbVertical={props => <div {...props} className=\"thumb-vertical\"/>}\r\n      >\r\n        <div className='country-items'>\r\n          { features.map(({ properties, id, code }) => {\r\n            if (isEmpty) {\r\n              return (\r\n                <div className='skeletonscreen' key={ id }>\r\n                  <div className='skeletonscreen-textitem'/>\r\n                  <span className='skeletonscreen-picture'/>\r\n                </div>\r\n              )\r\n            }\r\n\r\n            // eslint-disable-next-line\r\n            if (properties.name.toLowerCase().indexOf(isCountry) != '-1') {\r\n              return (\r\n                <Item \r\n                  key={ id }\r\n                  countName={ properties.name }\r\n                  countCode={ code }\r\n                  countId={ id }\r\n                  onSelectCountry={ onSelectCountry }\r\n                  onCountVisited={ onCountVisited }\r\n                />\r\n              )\r\n            }\r\n\r\n            return null\r\n          })}\r\n        </div>\r\n      </Scrollbars>\r\n    </>\r\n  )\r\n}\r\n\r\nSidebar.propTypes = {\r\n  onFindCountry: PropTypes.func,\r\n  onSelectCountry: PropTypes.func,\r\n  onCountVisited: PropTypes.func,\r\n  isCountry: PropTypes.string\r\n}\r\n\r\nexport default Sidebar;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setMapId } from '../../actions/map_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport Sidebar from './sidebar';\r\n\r\nclass SidebarContainer extends Component {\r\n  state = {\r\n    isFoundCountry: ''\r\n  }\r\n\r\n  handleFindCountry = evt => {\r\n    const label = evt.target.value.trim();\r\n\r\n\t\tthis.setState({\r\n      isFoundCountry: label.toLowerCase()\r\n\t\t});\r\n  }\r\n\r\n  handleSelectCountry = id => {\r\n    const { showModal, selectCountry } = this.props;\r\n\r\n    selectCountry(id);\r\n    showModal('gallery', null);\r\n  }\r\n\r\n  —ÅountVisited = id => {\r\n    const { images } = this.props;\r\n\r\n    if (images.hasOwnProperty(id)) {\r\n      const items = images[id];\r\n      const itemLast = items[items.length-1];\r\n\r\n      return (\r\n        <div className='count-visited-pic'>\r\n          <span style={{ backgroundImage: `url(${ itemLast.src })` }} />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Sidebar\r\n        onFindCountry={ this.handleFindCountry }\r\n        onSelectCountry={ this.handleSelectCountry }\r\n        onCountVisited={ this.—ÅountVisited }\r\n        isCountry={ this.state.isFoundCountry }\r\n        isEmpty={ this.props.isEmpty }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ gallery, user }) => {\r\n  return {\r\n    images: gallery.photos,\r\n    isEmpty: user.loading\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    showModal: (id, body) => dispatch(modalOppened(id, body)),\r\n    selectCountry: id => dispatch(setMapId(id))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(SidebarContainer);","import Sidebar from './sidebar_container';\r\n\r\nexport default Sidebar;","import * as actionTypes from './action_types';\r\nimport Orentation from '../utils';\r\n\r\nconst setGalleryPhoto = (id, files, cords) => async(dispatch, getState, { getFirebase, getFirestore }) => {\r\n  const firebase = getFirebase();\r\n  const db = getFirestore();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n  \r\n  try {\r\n    const data = getState().gallery.photos;\r\n    const isCoincidence = getState().map.marks.some(el => el.id.includes(id));\r\n    const docRef = await db.collection('map_location').doc(localData.uid);\r\n    const refData = await docRef.get();\r\n\r\n    if (files.length > 1) {\r\n      for (let key in files) {\r\n        console.log(files[key]);\r\n      }\r\n    } else {\r\n      const dataCords = refData.data();\r\n      const name = files[0].name;\r\n\r\n      new Orentation(files[0]).getFile(window.URL.createObjectURL(files[0]), async url => {\r\n        dispatch({ type: actionTypes.GALLERY_FETCH_REQUESTED });\r\n\r\n        const { ref } = await firebase.storage()\r\n        .ref(`users/${localData.uid}/gallery/${id}/${files[0].name}`)\r\n        .putString(url, 'data_url');\r\n\r\n        const src = await ref.getDownloadURL();\r\n        const { timeCreated } = await firebase.storage().ref(ref.fullPath).getMetadata();\r\n\r\n        if (!data.hasOwnProperty(id)) {\r\n          data[id] = [{ src, name, timeCreated }];\r\n        } else {\r\n          if (!(data[id].every(el => el.name.includes(ref.name))) || !data[id].length) {\r\n            data[id].push({ src, name, timeCreated });\r\n          }\r\n        }\r\n\r\n        data[id].sort((a, b) => (\r\n          new Date(b.timeCreated) - new Date(a.timeCreated)\r\n        ));\r\n\r\n        dispatch({ type: actionTypes.SET_PHOTO_GALLERY, payload: data });\r\n      \r\n        if (!isCoincidence) {\r\n          dispatch({ type: actionTypes.SET_MAP_COORDINATES, payload: cords });\r\n        }\r\n      })\r\n\r\n      if (refData.exists && !dataCords.hasOwnProperty(id)) {\r\n        db.collection('map_location').doc(localData.uid).update({\r\n          [id]: [{ ...cords }]\r\n        });\r\n      }\r\n\r\n      if (!refData.exists) {\r\n        db.collection('map_location').doc(localData.uid).set({\r\n          [id]: [{ ...cords }]\r\n        });\r\n      }\r\n    }\r\n  } catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nconst deletedData = (id, delItem) => (dispatch, getState, { getFirebase }) => {\r\n  const firebase = getFirebase();\r\n  const localData = JSON.parse(localStorage.getItem('_user'));\r\n  const data = getState().gallery.photos;\r\n  let newData = {};\r\n\r\n  data[id].forEach(el => {\r\n    if (!delItem.keys.includes(el.name)) {\r\n      newData = { ...data };\r\n      newData[id] = [].concat(el);\r\n    } else {\r\n      firebase.storage()\r\n      .ref(`users/${localData.uid}/gallery/`)\r\n      .child(`${id}/${el.name}`).delete()\r\n        .then(() => dispatch({ type: actionTypes.SET_NOTICE, payload: {\r\n          notifi: true,\r\n          message: 'Photo removed from gallery'\r\n        }}));\r\n    }\r\n  });\r\n\r\n  for (let key in data) {\r\n    if (key !== id && !newData.hasOwnProperty(id)) {\r\n      newData[key] = data[key];\r\n    }\r\n  }\r\n\r\n  dispatch({ type: actionTypes.REMOVE_ITEM_GALLERY, payload: newData });\r\n}\r\n\r\nexport {\r\n  setGalleryPhoto,\r\n  deletedData\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst GalleryItem = props => {\r\n  const { \r\n    data,\r\n    isSelected,\r\n    isSelectedItem,\r\n    onSelectedItem,\r\n    onOpenLightBox\r\n  } = props;\r\n\r\n  const { selected, keys } = isSelectedItem;\r\n\r\n  return (\r\n    <div className='gallery-item'>\r\n      {/* eslint-disable-next-line */}\r\n      <a\r\n        className={ `${ isSelected ? 'gallery-item-view on-selected' : 'gallery-item-view' }` }\r\n        onClick={ !isSelected ? () => onOpenLightBox(data.name) : () => onSelectedItem(data.name) }\r\n        >\r\n        { selected && keys.includes(data.name) ? <span className=\"select-check-icon\" /> : null }\r\n        <div className='gallery-item-pic'>\r\n          <img src={ data.src } alt=\"shows countries you visited\"/>\r\n        </div>\r\n        <div className='gallery-item-box'/>\r\n      </a>\r\n    </div>\r\n  )\r\n}\r\n\r\nGalleryItem.propTypes = {\r\n  isSelected: PropTypes.bool,\r\n  isSelectedItem: PropTypes.object,\r\n  data: PropTypes.object\r\n}\r\n\r\nexport default GalleryItem;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Carousel, { Modal, ModalGateway } from 'react-images';\r\nimport { Scrollbars } from 'react-custom-scrollbars';\r\nimport GalleryItem from './gallery_item';\r\nimport Spinner from '../spinner';\r\nimport './style.scss';\r\n\r\nconst GalleryGreeting = () => {\r\n  return (\r\n    <div className='gallery-title'>\r\n      <span>You can upload your photos here.</span>\r\n      <span className='pic-info'/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst GalleryView = props => {\r\n  const { \r\n    onDragEnter,\r\n    onDragOver,\r\n    onDragLeave,\r\n    onDrop,\r\n    onChange,\r\n    onClick,\r\n    onClose,\r\n    onSelected,\r\n    onSelectedItem,\r\n    onRemoveItem,\r\n    onOpenLightbox,\r\n    isSelected,\r\n    isSelectedItem,\r\n    islightboxOpen,\r\n    isSelectedIndex,\r\n    isImages,\r\n    isLoading,\r\n    inputRef\r\n  } = props;\r\n\r\n  return (\r\n    <div className='gallery'>\r\n      <div className=\"gallery-head\">\r\n        <div className=\"select-photo\">\r\n          { isImages.length ? (\r\n            <button \r\n              className='select-btn'\r\n              onClick={ onSelected }\r\n            >\r\n              { isSelected ? 'Cancel' : 'Select' }\r\n            </button>\r\n          ) : null }\r\n          { isSelected ? (\r\n            <button\r\n              className=\"gallery-basket\"\r\n              disabled={ !isSelectedItem.selected }\r\n              onClick={ onRemoveItem }\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className='svg-icon' width='18' height='18' viewBox=\"0 0 512 512\">\r\n                <path d=\"M436 60h-90V45c0-24.813-20.187-45-45-45h-90c-24.813 0-45 20.187-45 45v15H76c-24.813 0-45 20.187-45 45v30c0 8.284 6.716 15 15 15h16.183L88.57 470.945l.011.129C90.703 494.406 109.97 512 133.396 512h245.207c23.427 0 42.693-17.594 44.815-40.926l.011-.129L449.817 150H466c8.284 0 15-6.716 15-15v-30c0-24.813-20.187-45-45-45zM196 45c0-8.271 6.729-15 15-15h90c8.271 0 15 6.729 15 15v15H196V45zm197.537 423.408c-.729 7.753-7.142 13.592-14.934 13.592H133.396a14.927 14.927 0 01-14.934-13.592L92.284 150h327.432l-26.179 318.408zM451 120H61v-15c0-8.271 6.729-15 15-15h360c8.271 0 15 6.729 15 15v15z\"/>\r\n                <path d=\"M256 180c-8.284 0-15 6.716-15 15v212c0 8.284 6.716 15 15 15s15-6.716 15-15V195c0-8.284-6.716-15-15-15zM346 180c-8.284 0-15 6.716-15 15v212c0 8.284 6.716 15 15 15s15-6.716 15-15V195c0-8.284-6.716-15-15-15zM166 180c-8.284 0-15 6.716-15 15v212c0 8.284 6.716 15 15 15s15-6.716 15-15V195c0-8.284-6.716-15-15-15z\"/>\r\n              </svg>\r\n            </button>\r\n          ) : null }\r\n        </div>\r\n        <div className=\"head-title\">{ isSelected ? 'Select items' : 'Photos' }</div>\r\n        <div className=\"head-close\">\r\n          <button className='close-btn' onClick={ onClose } >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className='svg-icon' viewBox=\"0 0 47.97 47.97\">\r\n              <path d=\"M28.23 23.99L47.09 5.12A3 3 0 1 0 42.85.88L23.99 19.74 5.12.88A3 3 0 1 0 .88 5.12L19.74 24 .88 42.85a3 3 0 1 0 4.24 4.24L24 28.23l18.86 18.86a3 3 0 0 0 4.24 0 3 3 0 0 0 0-4.24L28.23 23.99z\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        { isLoading ? <Spinner mode='dark' width='20px' height='20px' /> : null }\r\n      </div>\r\n      <div className=\"gallery-content\">\r\n        <Scrollbars>\r\n          <div className='gallery-wrapper'>\r\n            { !isImages.length ? GalleryGreeting() : null }\r\n            {isImages.map(item => (\r\n              <GalleryItem\r\n                key={ item.name }\r\n                data={ item }\r\n                isSelected={ isSelected }\r\n                isSelectedItem={ isSelectedItem }\r\n                onSelectedItem={ onSelectedItem }\r\n                onOpenLightBox={ onOpenLightbox }\r\n              />\r\n            ))}\r\n          </div>\r\n        </Scrollbars>\r\n        <ModalGateway>\r\n          { islightboxOpen ? (\r\n            <Modal\r\n              onClose={ onOpenLightbox }\r\n            >\r\n              <Carousel\r\n                currentIndex={isSelectedIndex}\r\n                views={isImages}\r\n              />\r\n            </Modal>\r\n          ) : null}\r\n        </ModalGateway>\r\n      </div>\r\n      <div \r\n        className=\"drag-file\"\r\n        onDragEnter={ evt => onDragEnter(evt)}\r\n        onDragOver={evt => onDragOver(evt)}\r\n        onDragLeave={evt => onDragLeave(evt)}\r\n        onDrop={evt => onDrop(evt)}\r\n      >\r\n      <>\r\n        <input \r\n          className=\"input-file\"\r\n          onChange={evt => onChange(evt)}\r\n          type=\"file\" \r\n          name=\"file\" \r\n          multiple accept=\"image/*\"\r\n          ref={ inputRef }\r\n          />\r\n        <div className=\"drag-info\"> \r\n         <span onClick={ onClick }>Browse</span> file to upload\r\n        </div>\r\n      </>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nGalleryView.propTypes = {\r\n  onDragEnter: PropTypes.func,\r\n  onDragOver: PropTypes.func,\r\n  onDragLeave: PropTypes.func,\r\n  onDrop: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  onClose: PropTypes.func,\r\n  onSelected: PropTypes.func,\r\n  onSelectedItem: PropTypes.func,\r\n  onRemoveItem: PropTypes.func,\r\n  onOpenLightbox: PropTypes.func,\r\n  isSelected: PropTypes.bool,\r\n  isSelectedItem: PropTypes.object,\r\n  islightboxOpen: PropTypes.bool,\r\n  isSelectedIndex: PropTypes.number,\r\n  isImages: PropTypes.array,\r\n  isLoading: PropTypes.bool\r\n}\r\n\r\nexport default GalleryView;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setGalleryPhoto, deletedData } from '../../actions/gallery_actions';\r\nimport { deleteGPSCoordinates } from '../../actions/map_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport ServicesGeoCordinats from '../../services/service_geo_cordinats';\r\nimport Gallery from './gallery';\r\n\r\nclass GalleryContainer extends Component {\r\n  fileInput = React.createRef();\r\n  serviceGeoCordinats = new ServicesGeoCordinats();\r\n\r\n  state = {\r\n    lightboxIsOpen: false,\r\n    selectedIndex: 0,\r\n    selected: false,\r\n    selectedItem: {\r\n      selected: false,\r\n      keys: []\r\n    }\r\n  }\r\n\r\n  handleClick = () => {\r\n    this.fileInput.current.click();\r\n  }\r\n\r\n  handleChange = async(evt) => {\r\n    const { map, setPhotosGallery } = this.props;\r\n    const { selectMapId } = map;\r\n    const fileList = evt.target.files;\r\n    const { latlng }  = await this.serviceGeoCordinats.getCords(selectMapId);\r\n\r\n    setPhotosGallery(selectMapId, fileList, {\r\n      lat: latlng[0],\r\n      lon: latlng[1],\r\n      id: selectMapId\r\n    });\r\n  }\r\n\r\n  handleDragOverEnter(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    evt.target.classList.add('dragover');\r\n  }\r\n\r\n  handleDragLeave(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    const rect = evt.target.getBoundingClientRect();\r\n    const dx = evt.clientX - rect.left;\r\n    const dy = evt.clientY - rect.top;\r\n    if ((dx < 0) || (dx >= rect.width) || (dy < 0) || (dy >= rect.height)) {\r\n        evt.target.classList.remove('dragover');\r\n    };\r\n  }\r\n\r\n  handleDragDrop(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    evt.target.classList.remove('dragover');\r\n\t\t// const fileList = evt.dataTransfer.files;\r\n  }\r\n\r\n  handleSelected = () => {\r\n    this.setState(state => {\r\n      const isSelect = !!state.selectedItem.keys.length;\r\n\r\n      return {\r\n        selected: !state.selected,\r\n        selectedItem: {\r\n          selected: isSelect,\r\n          keys: []\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSelectItem = val => {\r\n    this.setState(({ selectedItem }) => {\r\n      const keys = selectedItem.keys;\r\n      const index = keys.findIndex(el => el === val);\r\n      const newArray = [];\r\n      \r\n      // eslint-disable-next-line\r\n      if (index == '-1') {\r\n        newArray.push(...keys.concat(val));\r\n      } else {\r\n        keys.splice(index, 1);\r\n        newArray.push(...keys);\r\n      }\r\n\r\n      return {\r\n        selectedItem: {\r\n          selected: !!newArray.length,\r\n          keys: newArray\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleRemoveItem = () => {\r\n    const { selectedItem } = this.state;\r\n    const { map, deleteDataItem, deleteMapCords } = this.props;\r\n    const { selectMapId } = map;\r\n\r\n    this.setState({\r\n      selected: false,\r\n      selectedItem: {\r\n        selected: false,\r\n        keys: []\r\n      }\r\n    });\r\n\r\n    Promise.all([\r\n      deleteDataItem(selectMapId, selectedItem),\r\n      deleteMapCords(selectMapId)\r\n    ])\r\n  }\r\n\r\n  handleOpenLightbox = name => {\r\n    const { data, map } = this.props;\r\n    const { selectMapId } = map;\r\n    const selectedIndex = data[selectMapId].findIndex(item => item.name === name);\r\n    \r\n    this.setState(state => {\r\n      return {\r\n        lightboxIsOpen: !state.lightboxIsOpen,\r\n        selectedIndex\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const { data, map, closeModal, isLoading } = this.props;\r\n    const { selected, selectedItem, lightboxIsOpen, selectedIndex } = this.state;\r\n    const { selectMapId } = map;\r\n    const images = [];\r\n\r\n    if (data.hasOwnProperty(selectMapId)) {\r\n      data[selectMapId].forEach(el => images.push(el));\r\n    }\r\n\r\n    return (\r\n      <Gallery\r\n        onDragEnter={ this.handleDragOverEnter }\r\n        onDragOver={ this.handleDragOverEnter }\r\n        onDragLeave={ this.handleDragLeave }\r\n        onDrop={ this.handleDragDrop }\r\n        onChange={ this.handleChange }\r\n        onClick={ this.handleClick }\r\n        onClose={ closeModal }\r\n        onSelected={ this.handleSelected }\r\n        onSelectedItem={ this.handleSelectItem }\r\n        onRemoveItem={ this.handleRemoveItem }\r\n        onOpenLightbox={ this.handleOpenLightbox }\r\n        isSelected={ selected }\r\n        isSelectedItem={ selectedItem }\r\n        islightboxOpen={ lightboxIsOpen }\r\n        isSelectedIndex={ selectedIndex }\r\n        isImages={ images }\r\n        isLoading={ isLoading }\r\n        inputRef={ this.fileInput }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ gallery, map }) => {\r\n  return {\r\n    data: gallery.photos,\r\n    isLoading: gallery.loading,\r\n    map\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    setPhotosGallery: (id, files, cords) => dispatch(setGalleryPhoto(id, files, cords)),\r\n    deleteDataItem: (id, delitem) => dispatch(deletedData(id, delitem)),\r\n    deleteMapCords: id => dispatch(deleteGPSCoordinates(id)),\r\n    closeModal: () => dispatch(modalOppened())\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(GalleryContainer);","import Gallery from './gallery_container';\r\n\r\nexport default Gallery;","import Notification from './notification';\r\n\r\nexport default Notification;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './style.scss';\r\n\r\nconst Notification = props => {\r\n  const { notice } = props;\r\n\r\n  if (notice.isNotice) {\r\n    return (\r\n      <div className='notification'>\r\n        <div className='notification-text'>\r\n          { notice.message }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nNotification.propTypes = {\r\n  notice: PropTypes.object\r\n}\r\n\r\nexport default Notification;","import React from 'react';\r\nimport { slide as Menu } from 'react-burger-menu';\r\nimport AppHeader from '../header';\r\nimport AppMap from '../map_leaflet';\r\nimport AppSidebar from '../sidebar';\r\nimport ReactModal from 'react-modal';\r\nimport Gallery from '../gallery';\r\nimport Notification from '../notification';\r\nimport './style.scss';\r\n\r\nconst Home = props => {\r\n  const { \r\n    isOpen,\r\n    onClose,\r\n    isNotice\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className='app-layout'>\r\n        <div className='app-content'>\r\n          <AppHeader/>\r\n          <AppMap/>\r\n        </div>\r\n        \r\n        <aside className='app-sidebar'>\r\n          <Menu\r\n            customCrossIcon={ false }\r\n          >\r\n            <AppSidebar/>\r\n          </Menu>\r\n        </aside>\r\n      </div>\r\n      <ReactModal\r\n        isOpen={ isOpen }\r\n        onRequestClose={ onClose }\r\n        className=\"modal modal-gallery\"\r\n        overlayClassName=\"modal-mask\"\r\n      >\r\n        <Gallery onClose={ onClose } />\r\n      </ReactModal>\r\n      <Notification\r\n        notice={ isNotice }\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setNotice } from '../../actions/notice_actions';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport { getTheme } from '../../actions/theme_actions';\r\nimport { getUserData } from '../../actions/user_actions';\r\nimport AppHome from './home';\r\n\r\nclass HomeContainer extends Component {\r\n  componentDidMount() {\r\n    const { theme, getUser } = this.props;\r\n    theme();\r\n    getUser();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { notice, colorTheme } = this.props;\r\n    const body = document.body;\r\n\r\n    if (notice.isNotice !== prevProps.notice.isNotice) {\r\n      this.pushNotice();\r\n    }\r\n\r\n    if (colorTheme !== prevProps.colorTheme) {\r\n      colorTheme ? body.dataset.theme = colorTheme : body.removeAttribute('data-theme');\r\n    }\r\n  }\r\n\r\n  handleClosedModal = () => {\r\n    this.props.toggleModal();\r\n  }\r\n\r\n  pushNotice = () => {\r\n    const { getNotice } = this.props;\r\n\r\n    setTimeout(getNotice, 2500);\r\n  }\r\n\r\n  render() {\r\n    const { notice, id } = this.props;\r\n\r\n    return (\r\n      <AppHome\r\n        onClose={ this.handleClosedModal }\r\n        isOpen={ id === 'gallery' }\r\n        isNotice={ notice }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ notice, modal, theme }) => {\r\n  return {\r\n    notice,\r\n    id: modal.id,\r\n    colorTheme: theme.colorTheme,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getUser: () => dispatch(getUserData()),\r\n    getNotice: () => dispatch(setNotice()),\r\n    toggleModal: () => dispatch(modalOppened()),\r\n    theme: () => dispatch(getTheme())\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(HomeContainer);","import Home from './home_container';\r\n\r\nexport default Home;","import * as actionTypes from './action_types';\r\n\r\nconst setNotice = () => dispatch => {\r\n  dispatch({ type: actionTypes.SET_NOTICE, payload: {\r\n    notice: false\r\n  }});\r\n}\r\n\r\nexport {\r\n  setNotice\r\n}","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst PrivateRoute = ({ component:Component, ...rest }) => {\r\n  const isUser = JSON.parse(localStorage.getItem('_user')) || null;\r\n\r\n  return(\r\n    <Route\r\n      { ...rest }\r\n      render={ routeProps => {\r\n        return isUser && isUser.isLogined && isUser.uid ? <Component { ...routeProps } /> : <Redirect exact to='/login' />\r\n      }}\r\n    />\r\n  )\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import Input from './input';\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nconst shadowPassword = show => {\r\n  if (!show) {\r\n    return (\r\n      <svg width='22' height='22' focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\">\r\n        <path d=\"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"/>\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <svg width='22' height='22' focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\">\r\n      <path fill=\"none\" d=\"m0 0h24v24H0z\"/>\r\n      <path d=\"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"/>\r\n    </svg>\r\n  )\r\n}\r\n\r\nconst Input = props => {\r\n  const { \r\n    input,\r\n    meta,\r\n    visiblePass,\r\n    infoPass,\r\n    showHidePassword,\r\n    onShowPassword\r\n  } = props;\r\n\r\n  return(\r\n    <div className='unlogged-input-container'>\r\n      <label className='unlogged-label'>\r\n        <input\r\n          className={ `${ meta.touched && meta.invalid ? 'unlogged-input is-error' : 'unlogged-input' }` }\r\n          { ...input }\r\n          type={ !!visiblePass && showHidePassword[input.name].showPass ? 'text' : props.type }\r\n          placeholder={ props.placeholder }\r\n          autoComplete='off'\r\n        />\r\n      </label>\r\n      { !!visiblePass ? (\r\n        <button\r\n          type='button'\r\n          className='visually-hidden'\r\n          onClick={ () => onShowPassword(input.name) }\r\n        >\r\n          { shadowPassword(showHidePassword[input.name].showPass) }\r\n        </button>\r\n      ) : null }\r\n      { !!infoPass ? (\r\n        <button \r\n          type='button' \r\n          className='tooltip-anchor' \r\n          data-tooltip='The password must be at least 6 characters long, contain at least 1 number and 1 letter.'\r\n        >\r\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 524.235 524.235\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M262.118 0C117.588 0 0 117.588 0 262.118s117.588 262.118 262.118 262.118 262.118-117.588 262.118-262.118S406.647 0 262.118 0zm17.05 417.639c-12.453 2.076-37.232 7.261-49.815 8.303-10.651.882-20.702-5.215-26.829-13.967a32.756 32.756 0 01-3.968-29.997l49.547-136.242h-51.515c-.044-28.389 21.25-49.263 48.485-57.274 12.997-3.824 37.212-9.057 49.809-8.255 7.547.48 20.702 5.215 26.829 13.967a32.756 32.756 0 013.968 29.997l-49.547 136.242h51.499c.01 28.356-20.49 52.564-48.463 57.226zm15.714-253.815c-18.096 0-32.765-14.671-32.765-32.765 0-18.096 14.669-32.765 32.765-32.765s32.765 14.669 32.765 32.765c0 18.095-14.668 32.765-32.765 32.765z\"/>\r\n          </svg>\r\n        </button>\r\n        ) : null }\r\n      { meta.touched && meta.error && <span className=\"unlogged-error\" style={{ display: meta.active ? 'none' : false }}>{ meta.error }</span> }\r\n      { !meta.invalid ? <span className='unlogged-success' /> : null }\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Input;\r\n","import React, { Component as ReactComponent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signUp } from '../../../actions/auth_actions';\r\nimport { modalOppened } from '../../../actions/modal_actions';\r\nimport Input from '../input';\r\nimport '../style.scss';\r\n\r\nclass authContainer extends ReactComponent {\r\n  state = {\r\n    password: { showPass: false },\r\n    confirm: { showPass: false }\r\n  }\r\n\r\n  handleSubmit = async(values) => {\r\n    const { location } = this.props;\r\n\r\n    switch(location.pathname) {\r\n      case '/login':\r\n        await this.props.signIn(values);\r\n        break;\r\n      case '/register':\r\n        await this.props.signUp(values);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (this.props.isLogined) {\r\n      this.props.history.push('/');\r\n    }\r\n\r\n    if (this.props.error) {\r\n      this.props.showModal('form-error', this.props.error);\r\n    }\r\n  };\r\n\r\n  handleValidate = (values, field, settings) => {\r\n    if (!values || !values.length) {\r\n      return 'Require field';\r\n    }\r\n\r\n    switch(values) {\r\n      case field.email:\r\n        return this.handleValidUserEmail(field.email);\r\n      case field.password:\r\n        if (settings.form !== 'signin') {\r\n          return this.handleValidUserPassword(field.password);\r\n        }\r\n        break;\r\n      case field.confirm:\r\n        return this.handleValidConfirmPass(field.confirm, field.password);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  handleValidUserEmail = value => {\r\n    const regExp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n    if (!regExp.test(String(value).toLowerCase())) {\r\n      return 'Invalid email';\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  handleValidUserPassword = value => {\r\n    const regExp = /^(?=.*[a-z])(?=.*\\d).{6,}$/;\r\n\r\n    if (value.length < 6) {\r\n      return 'At least 6 characters';\r\n    } else if (!regExp.test(value)) {\r\n      return 'Password must contain letters and numbers';\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  handleValidConfirmPass = ( password, confirmPassword ) => {\r\n    if (!confirmPassword) {\r\n      return 'Require field';\r\n    }\r\n\r\n    if (confirmPassword !== password) {\r\n      return 'Passwords do not match';\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  handleToggleShowPassword = name => {\r\n    this.setState(state => {\r\n      return {\r\n        [name]: {\r\n          showPass: !state[name].showPass\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      renderComponent: Component,\r\n      location,\r\n      isLoading,\r\n    } = this.props;\r\n\r\n    const { pathname } = location;\r\n    const showHide = this.state;\r\n\r\n\r\n    return(\r\n      <div className={ `${ pathname === '/login' ? 'unlogged-authen unlogged-login' : 'unlogged-authen unlogged-signup' }` }>\r\n        <div className='unlogged-container'>\r\n          <div className='unlogged-container-inner'>\r\n            <Component\r\n              renderProp={ props => <Input { ...props } /> }\r\n              onSubmit={ this.handleSubmit }\r\n              onValidate={ this.handleValidate }\r\n              onToggleShowPassword={ this.handleToggleShowPassword }\r\n              showHide={ showHide }\r\n              isLoading={ isLoading }\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth, modal }) => {\r\n  return {\r\n    error: auth.error,\r\n    isLoading: auth.loading\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    signIn: creds => dispatch(signIn(creds)),\r\n    signUp: creds => dispatch(signUp(creds)),\r\n    showModal: (id, body) => dispatch(modalOppened(id, body))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(withRouter(authContainer));\r\n","import AuthContainer from './auth';\r\n\r\nexport default AuthContainer;","import React from 'react';\r\nimport { Redirect } from 'react-router';\r\n\r\nconst AuthSocials = props => {\r\n  const { onSignInGoogle, onSignInFb, isLogined } = props;\r\n\r\n  return (\r\n    <div className=\"unlogged-socials-btn-container\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"unlogged-btn-social unlogged-btn-google\"\r\n        onClick={ onSignInGoogle }\r\n      >\r\n        <span className=\"icon-gpl\" />\r\n        <span className='google-label'>Google</span>\r\n        { isLogined ? <Redirect to='/'/> : null }\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className=\"unlogged-btn-social unlogged-btn-facebook\"\r\n        onClick={ onSignInFb }\r\n      >\r\n        <span className=\"icon-fb\" />\r\n        <span className='facebook-label'>Facebook</span>\r\n        { isLogined ? <Redirect to='/'/> : null }\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuthSocials;","import React, { Component } from \"react\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport firebase from \"firebase/app\";\r\nimport { signInSocials } from '../../../actions/auth_actions';\r\nimport AuthSocials from './auth_soc'\r\n\r\nclass AuthSocialsContainer extends Component {\r\n  providerGoogle = new firebase.auth.GoogleAuthProvider();\r\n  providerFacebook = new firebase.auth.FacebookAuthProvider();\r\n\r\n  signInGoogle = () => {\r\n    this.props.signInGoogle(this.providerGoogle);\r\n  };\r\n\r\n  signInFacebook = () => {\r\n    this.props.signInFacebook(this.providerFacebook);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AuthSocials\r\n        onSignInGoogle={ this.signInGoogle }\r\n        onSignInFb={ this.signInFacebook }\r\n        isLogined={ this.props.isLogined }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return {\r\n    isLogined: auth.isLogined\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    signInGoogle: provider => dispatch(signInSocials(provider)),\r\n    signInFacebook: provider => dispatch(signInSocials(provider))\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps)(withRouter(AuthSocialsContainer));","import AuthSocials from './auth_soc_container';\r\n\r\nexport default AuthSocials;","import Button from './button'\r\n\r\nexport default Button;","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './style.scss';\r\n\r\nconst Button = props => {\r\n  const {location, disabled, isLoading } = props;\r\n  const { pathname } = location;\r\n  const url = ['/login','/register'].find(url => url === pathname);\r\n\r\n  return (\r\n    <button\r\n      className='unlogged-btn unlogged-btn-pink unlogged-btn-wide'\r\n      type=\"submit\" \r\n      disabled={ disabled }\r\n    >\r\n      { url ? isLoading ? 'Loading...' : 'Sign up' : 'Sign in' }\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default withRouter(Button);","import SignIn from './signin';\r\n\r\nexport default SignIn;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport Social from '../auth_socials';\r\nimport Button from '../button';\r\n\r\nconst SignInView = props => {\r\n  const { \r\n    handleSubmit,\r\n    onValidate,\r\n    valid,\r\n    isLoading\r\n  } = props;\r\n\r\n  return(\r\n    <>\r\n      <div className='unlogged-heading-2'>Are you ready to travel ?</div>\r\n      <Social/>\r\n      <form className='unlogged-form' onSubmit={ handleSubmit }>\r\n        <Field\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Enter your email address\"\r\n          validate={ onValidate }\r\n          component={ props.renderProp }\r\n        />\r\n        <Field\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Enter your password\"\r\n          validate={ onValidate }\r\n          component={ props.renderProp }\r\n        />\r\n        <Button\r\n          disabled={ !valid || isLoading }\r\n          isLoading={ isLoading }\r\n        />\r\n      </form>\r\n      <div className='unlogged-notice'>\r\n        Not yet registered ? &nbsp;\r\n        <Link to='/register'>\r\n          Sign up\r\n        </Link>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default reduxForm({\r\n  form: 'signin'\r\n})(SignInView);\r\n","import SignUp from './signup';\r\n\r\nexport default SignUp;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport Button from '../button';\r\nimport Social from '../auth_socials';\r\n\r\nconst SignUpView = props => {\r\n  const { \r\n    handleSubmit,\r\n    onValidate,\r\n    onToggleShowPassword,\r\n    valid,\r\n    showHide,\r\n    isLoading\r\n   } = props;\r\n\r\n  return(\r\n    <>\r\n      <div className='unlogged-heading-2'>Ready to sign up?</div>\r\n      <Social/>\r\n      <form \r\n        className='unlogged-form' \r\n        onSubmit={ handleSubmit }\r\n      >\r\n        <Field\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Enter your email address\"\r\n          validate={ onValidate }\r\n          component={ props.renderProp }\r\n        />\r\n        <Field\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Enter your password\"\r\n          validate={ onValidate }\r\n          visiblePass\r\n          infoPass\r\n          showHidePassword={ showHide }\r\n          onShowPassword={ onToggleShowPassword }\r\n          component={ props.renderProp }\r\n        />\r\n        <Field\r\n          name=\"confirm\"\r\n          type=\"password\"\r\n          placeholder=\"Enter your re-password\"\r\n          validate={ onValidate }\r\n          visiblePass\r\n          showHidePassword={ showHide }\r\n          onShowPassword={ onToggleShowPassword }\r\n          component={ props.renderProp }\r\n        />\r\n        <div className='auth-button'> \r\n          <Button\r\n            disabled={ !valid || isLoading }\r\n            isLoading={ isLoading }\r\n          />\r\n        </div>\r\n      </form>\r\n      <div className='unlogged-notice unlogged-notice-register'>\r\n        Already registered ? &nbsp;\r\n        <Link to='/login'>\r\n          Sign in\r\n        </Link>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default reduxForm({\r\n  form: 'signup'\r\n})(SignUpView);\r\n","import Topbar from './topbar';\r\n\r\nexport default Topbar;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Logo from '../logo';\r\nimport './style.scss';\r\n\r\nconst Topbar = () => {\r\n  return (\r\n    <header className='topbar'>\r\n      <div className='react-topbar-container'>\r\n        <div className='header-col'>\r\n          <Logo/>\r\n        </div>\r\n        <div className='header-col header-col-right'>\r\n          <Link className='unlogged-btn unlogged-btn-black unlogged-btn-small unlogged-btn-outline' to='/login'>\r\n            <span className='unlogged-btn-label'>Log in</span>\r\n          </Link>\r\n          <Link className='unlogged-btn unlogged-btn-blue unlogged-btn-small' to='/register'>\r\n            <span className='unlogged-btn-label'>Sign up</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Topbar;","import React, { Component } from 'react';\r\nimport ReactModal from 'react-modal';\r\nimport { connect } from 'react-redux';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport './style.scss';\r\nimport Logo from '../logo';\r\n\r\nReactModal.setAppElement('#root');\r\n\r\nclass ModalInfo extends Component {\r\n  render() {\r\n    return (\r\n      <ReactModal\r\n        isOpen={ !!this.props.body }\r\n        { ...this.props }\r\n      >\r\n        <div className='modal-content'>\r\n          { this.props.id === 'install' ? <Logo/> : null }\r\n          <div className='modal-error-title' style={{ marginTop: this.props.id === 'install' ? '12px' : false }}>\r\n            { this.props.id === 'install' ? 'Install Web App' : 'Error' }\r\n          </div>\r\n          <div className='error-text'>{ this.props.body }</div>\r\n        </div>\r\n        { this.props.id === 'install' ? (\r\n            <div className='modal-footer'>Just tab then <span/> <b>Add to Home Screen</b></div>\r\n          ) : null }\r\n        <button \r\n          className='modal-btn'\r\n          onClick={ () => this.props.onClose(undefined, null) }\r\n        >\r\n          OK\r\n        </button>\r\n      </ReactModal>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ modal }) => {\r\n  return {\r\n    body: modal.body,\r\n    id: modal.id\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onClose: (id, body) => dispatch(modalOppened(id, body))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalInfo);","import Modal from './modal_info';\r\n\r\nexport default Modal;","import React, { Component } from 'react';\r\nimport { withRouter, Route, Switch, Redirect } from 'react-router-dom';\r\nimport Home from '../home';\r\nimport PrivateRoute from '../auth/private_route';\r\nimport Auth from '../auth/auth_container';\r\nimport SingIn from '../auth/sign_in';\r\nimport SingUp from '../auth/sign_up';\r\nimport UnloggedTopbar from '../unlogged_topbar';\r\nimport ModalInfo from '../modal';\r\nimport { modalOppened } from '../../actions/modal_actions';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './app.scss';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    isOnline: true,\r\n    showInstallMessage: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('online', () => this.handleOnliseStatus(true));\r\n    window.addEventListener('offline', () => this.handleOnliseStatus(false));\r\n\r\n    if (this.handlePlatformIos() && !this.handleInStandaloneMode()) {\r\n      setTimeout(() => this.setState({ showInstallMessage: true }), 30000);\r\n    }\r\n\r\n    if (navigator.userAgent.match(/Android/i) && !this.handleInStandaloneMode()) {\r\n      this.handleInstall();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (!this.state.isOnline) {\r\n      const message = 'The internet connection appears to be offline';\r\n      this.props.showModal('offline', message);\r\n    }\r\n\r\n    if (this.state.showInstallMessage && this.state.isOnline) {\r\n      const message = 'Install this application on your home screen for quick and easy access when you\\'re on the go';\r\n      this.props.showModal('install', message);\r\n    }\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    window.removeEventListener('online');\r\n    window.removeEventListener('offline');\r\n  }\r\n\r\n  handlePlatformIos() {\r\n    const iosPlatform = [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ];\r\n  \r\n    if (!!navigator.platform) {\r\n      while (iosPlatform.length) {\r\n        if (navigator.platform === iosPlatform.pop()) { \r\n          return true; \r\n        }\r\n      }\r\n    }\r\n  \r\n    return false;\r\n  }\r\n\r\n  handleInStandaloneMode() {\r\n    return ('standalone' in window.navigator) && (window.navigator.standalone);\r\n  }\r\n\r\n  handleOnliseStatus = status => {\r\n    this.setState({ isOnline: status });\r\n  }\r\n\r\n  handleModalError = () => {\r\n    this.setState({isOnline: true});\r\n  }\r\n\r\n  handleInstall() {\r\n    const butInstall = document.getElementById('butInstall');\r\n    let deferredPrompt;\r\n\r\n    window.addEventListener('beforeinstallprompt', async evt => {\r\n      deferredPrompt = evt;\r\n\r\n      butInstall.addEventListener('click', () => { \r\n        const promptEvent = deferredPrompt\r\n        if (!promptEvent) {\r\n          return;\r\n        }\r\n\r\n        promptEvent.prompt();\r\n        promptEvent.userChoice.then(result => {\r\n          if (result.outcome === 'accepted') {\r\n            console.log('User accepted the prompt');\r\n          } else {\r\n            console.log('User dismissed the prompt');\r\n          }\r\n          deferredPrompt = null;\r\n        });\r\n      });\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const url = ['/login', '/register'].find(el => el === location.pathname);\r\n\r\n    return (\r\n      <main className='main-content'>\r\n        { url ? <UnloggedTopbar/> : null }\r\n          <Switch>\r\n            <PrivateRoute\r\n              exact\r\n              path=\"/\"\r\n              component={ Home }\r\n            />\r\n            <Route\r\n              exact\r\n              path='/login'\r\n              render={ () => <Auth renderComponent={ SingIn } />} \r\n            />\r\n            <Route\r\n              path='/register'\r\n              render={ () => <Auth renderComponent={ SingUp } />} \r\n            />\r\n            <Redirect to='/' />\r\n        </Switch>\r\n        <ModalInfo\r\n          className=\"modal modal-error\"\r\n          overlayClassName=\"modal-mask\"\r\n        />\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    showModal: (id, body) => dispatch(modalOppened(id, body))\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(App));\r\n","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport configureStore from './store/store';\r\nimport App from './components/app';\r\nimport './index.css';\r\n\r\nconst store = configureStore();\r\n\r\nrender(\r\n  <Provider store={ store }>\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <App/>\r\n    </Router>\r\n  </Provider>, \r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}